!function(){function e(e,n,t,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(o,r)}System.register(["./app-legacy.8MsYkguj.js"],(function(n,t){"use strict";var o,r,a,i,l,s,u,c,d,h,m,v,y,p,w,f,P,b,g,S,k,C,_,z,I,x,A,E,M,W,B,O;return{setters:[e=>{o=e.cn,r=e.so,a=e.sp,i=e.i,l=e.sq,s=e.bE,u=e.cs,c=e.a,d=e.a6,h=e.sr,m=e.ct,v=e.jV,y=e.ss,p=e.gN,w=e.iV,f=e.aK,P=e.iW,b=e.z,g=e.j3,S=e.j4,k=e.k,C=e.st,_=e.su,z=e.j5,I=e.sv,x=e.sw,A=e.cC,E=e.cq,M=e.cE,W=e.bl,B=e.sx,O=e.Q}],execute:function(){var t=document.createElement("style");function j(){var e,n;const{hasError:t}=o(m),v=r(),y=a(),{i18n:p,telemetryClient:w}=i(),f=p.translate("review.blocks.change_link_label"),P=null===(e=l(null==y||null===(n=y.method)||void 0===n?void 0:n.walletParams))||void 0===e?void 0:e.checkout_session_id,{inMemoryAmazonPayParts:{hasPaymentSheetError:b}}=s();return y?v.status!==u.Available?null:c(d,{onClick:()=>{try{v.sdk.buywithprime.changePaymentMethod({amazonPayOptions:{amazonCheckoutSessionId:P,isDeclined:t}})}catch(e){b.value=!0,w.error(new h(`Error on changing buyer payment method. Details: ${e}`,{cause:e}))}},children:f}):null}t.textContent=".oZdJX>*{display:flex;height:inherit;width:inherit}.oZdJX{overflow:hidden}\n/*$vite$:1*/",document.head.appendChild(t),n("P",F);class U extends Error{constructor(...e){var n,t,o;super(...e),n=this,o="PortableWalletsSandboxError",(t=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(t="name"))in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o}}const D={PortableWalletsPCIButton:"oZdJX"};function F({wallet:n,isSdkOnly:t=!1}){const{i18n:o,shop:r,source:a,environment:l,telemetryClient:d}=i(),{id:h}=r,{value:m}=v(),{countryCode:x,presentmentCurrency:A}=null!=m?m:{},E=y(n),M=null==E?void 0:E.configurationParams,W=p(null),{isScrimOpen:B,closePopupWindowsAndScrim:O}=w({endpoint:W,invokingWallet:n}),{inMemoryAmazonPayParts:{buttonStatus:j,sdkStatus:F}}=s(),T=f(null),q=f(null),N=P(),X=b((({errorMessage:e})=>d.error(new U(e))),[d]),$=p(!1),J=b(function(){var o,r=(o=function*(e){F.value={status:u.Loading};const o=yield e.call.configure({configurationParams:M,buyerCountry:x,buyerCurrency:A,shopId:h,cartId:a.sourceId,onlySdk:t,service:l.services.portableWallets});(null==o?void 0:o.status)===g.Success?(F.value=function(e,n){return{status:u.Available,sdk:{buywithprime:{changePaymentMethod:({amazonPayOptions:t})=>{var o;if(!t.amazonCheckoutSessionId)throw new U("Missing amazonCheckoutSessionId");null===(o=n.value)||void 0===o||o.call.changePaymentMethod({wallet:e,changePaymentParams:{amazonCheckoutSessionId:t.amazonCheckoutSessionId,isDeclined:t.isDeclined}})},changeShippingAddress:({amazonCheckoutSessionId:t})=>{var o;if(!t)throw new U("Missing amazonCheckoutSessionId");null===(o=n.value)||void 0===o||o.call.changeShippingAddress({wallet:e,changeShippingParams:{amazonCheckoutSessionId:t}})},initCheckout:()=>{throw new U('Unexpected invocation of "initCheckout"')},renderButton:()=>{throw new U('Unexpected invocation of "renderButton"')}},Pay:{changePaymentMethod:()=>{throw new U('Unexpected invocation of AmazonPay "changePaymentMethod" in BWP flow')},changeShippingAddress:()=>{throw new U('Unexpected invocation of AmazonPay "changeShippingAddress" in BWP flow')},initCheckout:()=>{throw new U('Unexpected invocation of AmazonPay "initCheckout" in BWP flow')},renderButton:()=>{throw new U('Unexpected invocation of AmazonPay "renderButton" in BWP flow')}}}}}(n,W),t||(j.value={status:"rendered"},d.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:n,status:"success",isPaymentMethodFlow:!1}}))):((null==o?void 0:o.status)===g.Error&&X({errorMessage:null==o?void 0:o.message}),F.value={status:u.Error},t||(j.value={status:"error"},d.counter({name:"checkout_wallet_button_rendered",value:1,attributes:{wallet_name:n,status:"error",isPaymentMethodFlow:!1}})))},function(){var n=this,t=arguments;return new Promise((function(r,a){var i=o.apply(n,t);function l(n){e(i,r,a,l,s,"next",n)}function s(n){e(i,r,a,l,s,"throw",n)}l(void 0)}))});return function(e){return r.apply(this,arguments)}}(),[M,x,h,A,a.sourceId,t,n,X,F,j,W,l,d]);$.value&&null!=m&&m.countryCode&&null!=m&&m.presentmentCurrency&&W.value&&($.value=!1,J(W.value));const L=S(),V=k((()=>({clicked:e=>{var n,t,o;B.value=!0,N(q),e&&(n=e.skus,t=e.apiClientId,null!==(o=window.Shopify)&&void 0!==o&&null!==(o=o.analytics)&&void 0!==o&&o.publish&&(window.Shopify.analytics.publish(`shopify:app:pixels:load:${t}`,{},{sendTo:"PIXEL-LOADER"}),window.Shopify.analytics.publish("bwp_checkout_widget_click",{skus:n},{sendTo:t})))},closed:()=>B.value=!1,redirect:({redirectUrl:e,requestPayload:n})=>{try{if(n){if(!T.current)return void d.error(new C("Form container not found",{groupingHash:"AmazonPaySandboxError::PortableWalletsPCIButton::FormContainerNotFound"}));_({formContainer:T.current,url:e,requestPayload:n}).submit()}else window.location.assign(e)}catch(t){d.error(t)}},reportError:X,telemetry:L})),[B,X,d,N,L]);return c("div",{className:D.PortableWalletsPCIButton,children:[c("div",{ref:T,style:{display:"none"}}),c(z,{wallet:n,onConnect:e=>{W.value=e,$.value=!0},onTerminate:()=>W.value=null,hostMethods:V,isSdkOnly:t,ref:q}),c(I,{isOpen:B.value,walletName:o.translate("brand.buy_with_prime"),handleClose:O})]})}const T=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const{i18n:e}=i(),{brand:n,descriptor:t}=x(),o=A(),r=!t||!o;return c(O,{children:[c(F,{wallet:E.BuyWithPrime,isSdkOnly:!0}),c(M,{id:"buyWithPrimePayDetails",label:e.translate("payment.payment_method"),summary:r?c(W,{}):c(B,{brand:n,descriptor:t}),action:c(j,{})})]})}},Symbol.toStringTag,{value:"Module"}));n("V",T)}}}))}();
