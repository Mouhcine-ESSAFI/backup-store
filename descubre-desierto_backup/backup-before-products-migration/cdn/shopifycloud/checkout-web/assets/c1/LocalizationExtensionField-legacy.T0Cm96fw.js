!function(){function e(e,n,t,o,r,i,a){try{var l=e[i](a),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(o,r)}function n(n){return function(){var t=this,o=arguments;return new Promise((function(r,i){var a=n.apply(t,o);function l(n){e(a,r,i,l,c,"next",n)}function c(n){e(a,r,i,l,c,"throw",n)}l(void 0)}))}}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function o(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(n){r(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function r(e,n,t){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}System.register(["./app-legacy.8MsYkguj.js","./RememberMeDescriptionText-legacy.BkscMgeo.js","./ShopPayOptInDisclaimer-legacy.DU4XfWDJ.js"],(function(e,t){"use strict";var r,i,a,l,c,u,s,p,m,d,h,_,v,y,b,f,g,I,T,O,P,k,C,E,w,N,x,S,j,R,A,B,L,D,z,V,G,M,F,$,H,q,Y,Q,U,W,Z,K,X,J,ee,ne,te,oe,re,ie,ae,le,ce,ue,se,pe,me,de,he,_e,ve,ye,be,fe,ge,Ie,Te,Oe,Pe,ke,Ce,Ee,we,Ne,xe,Se,je,Re,Ae,Be,Le,De,ze,Ve,Ge,Me,Fe,$e,He,qe;return{setters:[e=>{r=e.jP,i=e.jQ,a=e.dC,l=e.a,c=e.T,u=e.ax,s=e.j,p=e.a7,m=e.jR,d=e.i,h=e.jS,_=e.eT,v=e.jT,y=e.jU,b=e.hN,f=e.jV,g=e.iH,I=e.jW,T=e.ih,O=e.n,P=e.aD,k=e.a8,C=e.j0,E=e.jX,w=e.z,N=e.aL,x=e.Q,S=e.aV,j=e.aw,R=e.S,A=e.aQ,B=e.jY,L=e.jZ,D=e.j_,z=e.bO,V=e.V,G=e.au,M=e.j$,F=e.aY,$=e.cf,H=e.aq,q=e.aS,Y=e.eS,Q=e.k0,U=e.k1,W=e.aK,Z=e.ek,K=e.gN,X=e.k2,J=e.ck,ee=e.k3,ne=e.k,te=e.cm,oe=e.cu,re=e.aM,ie=e.aN,ae=e.k4,le=e.cv,ce=e.k5,ue=e.D,se=e.jB,pe=e.w,me=e.gK,de=e.k6,he=e.dv,_e=e.k7,ve=e.k8,ye=e.k9,be=e.ka,fe=e.Z,ge=e.a1,Ie=e.a2,Te=e.a4,Oe=e.a3,Pe=e.a5,ke=e.kb,Ce=e.gD,Ee=e.$,we=e.a0,Ne=e.aA,xe=e.kc,Se=e.cN,je=e.cM,Re=e.hq,Ae=e.a6,Be=e.kd,Le=e.bd,De=e.aB,ze=e.ke,Ve=e.ds,Ge=e.aI,Me=e.kf,Fe=e.b6},e=>{$e=e.R,He=e.u},e=>{qe=e.u}],execute:function(){var Ye=document.createElement("style");Ye.textContent="._5r6et{margin-bottom:1px}\n/*$vite$:1*/",document.head.appendChild(Ye),e({L:function({localizationExtension:e,index:n}){var t;const r=Ge(),{negotiate:i}=k(),[a,c]=P(),[u,s]=P(),p=oe(e.fields.value,r),m=e.fields.title.value,{localizedFieldErrors:d}=Me(),h=`$.cart.localizedField.${e.peek().key}`,_=`$.localizationExtension[${n}]`,v=d.find((({target:e})=>e===h)),y=e=>{var n;const t=null===(n=e.violations)||void 0===n?void 0:n.find((e=>{const{code:n,localizedMessage:t,nonLocalizedMessage:o,target:r}=e;if("LOCALIZATION_EXTENSION_FIELD_ERROR"===n&&r===_)return null!=t?t:o}));if(!t)return;const{localizedMessage:o,nonLocalizedMessage:r}=t;return null!=o?o:r};return N((()=>{r.value=v?v.message:u||void 0}),[r,v,u,a]),Fe((e=>{s(y(e)),c("submit")})),l(ae,o(o({},p),{},{label:m,name:m,onBlur:()=>{p.onBlur(),c(void 0),s(void 0),i({fieldsToResolve:["localizationExtensions"],include:[],onComplete:e=>{s(y(e)),c("blur")}})},value:null!==(t=p.value)&&void 0!==t?t:void 0}))},R:function({variant:e}){const{i18n:n}=d(),t=He(),o=qe(),r=O();if(N((()=>{r.shopPayRememberMeVisible.value=t}),[t,r.shopPayRememberMeVisible]),!t)return null;if("minimal"===e)return l(x,{children:[l(j,{spacing:"small100"}),l(bn,{})]});const i=l(Ve,{sectionId:"rememberMe",children:l(bn,{})}),a=o.isTreatment?n.translate("shop_pay_remember_me.label"):n.translate("shop_pay_remember_me.title");return"compact"===e?l(A,{accessibilityLabel:a,children:l(V,{children:[l(S,{level:2,children:a}),i]})}):l(V,{spacing:"none",children:[!o.isTreatment&&l(S,{level:2,children:a}),l(j,{}),i,l(j,{spacing:"small100"}),!o.isTreatment&&l(gn,{})]})},T:function({renderInSection:e,hideHeading:n}){const{i18n:t}=d(),o=l(x,{children:[!n&&l(x,{children:[l(S,{level:2,children:t.translate("tips.title")}),l(j,{})]}),l(rn,{})]});return e?l(A,{accessibilityLabel:t.translate("tips.title"),padding:R.default("base large-200").when({viewportInlineSize:{min:"extraSmall"}},"none none large-200 none"),children:o}):l(c,{accessibilityLabel:t.translate("tips.title"),children:o})}}),e("P",r({load:()=>i((()=>t.import("./PostPurchaseShouldRender-legacy.2Hap922H.js").then((e=>e.P))),void 0)}));const Qe="0";function Ue({label:e}){const n=a();return l(m,{id:Qe,ref:n("tipping_none"),children:l(c,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill",children:l(u,{children:s()?e:l(p,{type:"strong",children:e})})})})}function We({tipOption:e}){const{amount:n,percentage:t}=e,{i18n:o}=d(),r=o.numberFormatter({style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),i=a();return l(m,{id:n.amount.toString(),ref:i(`tipping_percent_${t}`),children:l(c,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill",children:[l(u,{children:r.format(t)}),l(u,{type:"small",color:"subdued",children:o.formatCurrency(n.amount,{currency:n.currencyCode,form:"short"})})]})})}function Ze({tipOptions:e,onChange:n,proposedTip:t}){var o,r;const{i18n:i}=d();return l("div",{style:h({[b.toggleButtonGroup.blockPadding]:b.spacing.small200}),children:l(_,{padding:"small200",children:l(v,{value:null!==(o=null==t||null===(r=t.amount)||void 0===r||null===(r=r.amount)||void 0===r?void 0:r.toString())&&void 0!==o?o:Qe,onChange:n,children:l(y,{columns:e.map((()=>"fill")),spacing:"none",children:e.map((e=>e.amount.amount>0?l(We,{tipOption:e},e.amount.amount.toString()):l(Ue,{label:i.translate("tips.no_tip_label")},"zero-amount")))})})})})}function Ke(e,n){switch(n.type){case"NEGOTIATION_START":return o(o({},e),{},{loading:!0});case"INPUT":return o(o({},e),{},{customTip:n.payload,dirty:(t=n.payload,r=e.negotiatedTip,!(!r&&t.amount===Qe)&&parseFloat(t.amount)!==(null==r?void 0:r.amount.amount)),error:void 0});case"NEGOTIATION_ERROR":return o(o({},e),{},{loading:!1,dirty:!1},n.payload);case"NEGOTIATION_FINISH":return o(o({},e),{},{customTip:n.payload.customTip,loading:!1,dirty:!1,negotiatedTip:n.payload.negotiatedTip});case"CLEAR":return o(o({},e),{},{customTip:n.payload});default:return e}var t,r}function Xe(e){var n;if("success"===e.status||"error"===e.status)return null===(n=e.negotiated.tipLines)||void 0===n?void 0:n[0]}function Je(e,n,t){return n&&e&&e.some((e=>e.amount.amount===n.amount.amount))||!n?"":t.formatCurrency(n.amount.amount,{currency:n.amount.currencyCode,form:"plain"})}function en(e,n){return String(e)===Qe?[]:[{amount:{amount:Number(e),currencyCode:n}}]}function nn({currencyCode:e,tipOptions:n}){return`currency: ${e}, tipOptions: ${JSON.stringify(n)}`}const tn="tipping_list_options",on=[];function rn(){return l(B,{children:l(ln,{})})}function an({amount:{amount:e}}){return e>0}function ln(){const{i18n:e,shop:{name:t,showTipPayments:r}}=d(),i=function(){var e,n;const{shop:t}=d(),{value:o}=f(),{value:r}=g();return null!==(e=null!==(n=null==o?void 0:o.presentmentCurrency)&&void 0!==n?n:null==r?void 0:r.currencyCode)&&void 0!==e?e:t.currencyCode}(),{symbol:c,prefixed:u}=L(i,e),{value:s=on}=D(),{state:m,invalidTipValue:h,negotiatedTip:_,proposedTip:v,onChange:b,onInput:x,onSubmit:S,clear:j}=function(e,t){I({currencyCode:e,tipOptions:t},nn);const{value:o}=T(),r=null==o?void 0:o[0],{i18n:i}=d(),a=Je(t,r,i),{tipLines:l}=O(),c=l.value[0],[u,s]=P(""),{negotiate:p}=k(),m=C(),[h,_]=E(Ke,{loading:!1,dirty:!1,negotiatedTip:r,customTip:{amount:a,currencyCode:e}}),v=w((()=>{_({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[e]),y=w(function(){var e=n((function*(e){const n=null==t?void 0:t.find((({amount:n})=>n.amount===Number(e)));if(!n)return;const o=en(n.amount.amount,n.amount.currencyCode),r={amount:e,currencyCode:n.amount.currencyCode};l.value=o,yield p({onComplete:e=>{const n=Xe(e);_({type:"NEGOTIATION_FINISH",payload:{customTip:r,negotiatedTip:n}}),v()}})}));return function(n){return e.apply(this,arguments)}}(),[t,l,p,v]),b=w(n((function*(){_({type:"NEGOTIATION_START"});const n=en(h.customTip.amount,e);l.value=n,yield p({onComplete:n=>{const o=function(e){var n,t;return"success"!==e.status&&"error"!==e.status||null===(n=null===(t=e.violations.find((e=>"ConfirmChangeViolation"===e.__typename)))||void 0===t?void 0:t.localizedMessage)||void 0===n?null:n}(n),r={amount:Je(t,Xe(n),i),currencyCode:e},a=Xe(n),l=i.formatCurrency(Number(h.customTip.amount),{currency:r.currencyCode,form:"short"}),c=o?{type:"NEGOTIATION_ERROR",payload:{customTip:r,error:o}}:{type:"NEGOTIATION_FINISH",payload:{customTip:r,negotiatedTip:a}};o&&(s(l),m()),_(c)}})})),[h.customTip.amount,e,l,p,t,i,m]),f=w((n=>{_({type:"INPUT",payload:{amount:"undefined"===n?Qe:n,currencyCode:e}})}),[e]),g=w(n((function*(){l.value=[],yield p({onComplete:v})})),[v,p,l]);return N((()=>{""===a&&_({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[a,e]),{state:h,negotiatedTip:r,invalidTipValue:u,proposedTip:c,onChange:y,onInput:f,onSubmit:b,clear:g}}(i,s),A=null!=_?_:v,B=A&&A.amount.amount>0,{loading:Q,dirty:U,customTip:W,error:Z}=m,[K,X]=P(r||B?[tn]:[]),J=u?{prefix:c}:{suffix:c},ee="TipsInput",ne=w((e=>{X(e),0===e.length&&j()}),[j]),te=a(),oe=parseFloat(W.amount),re=isNaN(oe)||0===oe?void 0:oe.toString();return l(Y,{name:"tipping_list",value:K,onChange:ne,variant:"group",hideRadioButton:r,children:l(z,{id:tn,details:l(V,{children:[(ie=s,Boolean(null==ie?void 0:ie.some(an))&&l(Ze,{tipOptions:s,onChange:b,proposedTip:v})),l(G,{onSubmit:S,children:[l(y,{columns:R.default([]).when({viewportInlineSize:{min:"small"}},["fill","auto"]),children:[l(M,o({controls:"stepper",error:Boolean(Z),id:ee,name:"tipping_custom",label:e.translate("tips.custom_label"),value:re,onInput:x},J)),l(F,{variant:"primary",type:"submit",loading:Q,disabled:!U,ref:te("tipping_custom_submit"),children:_&&_.amount.amount>0?e.translate("tips.update_tip"):e.translate("tips.add_tip")})]}),Z&&l($,{errorType:H.InputInvalid,message:Z,errorValue:h,children:l(q,{controlID:ee,children:Z})})]}),l(p,{children:e.translate("tips.message")})]}),children:e.translate("tips.description",{shop_name:t})})});var ie}function cn({value:e,onInput:n,onBlur:t,showOptionalLabel:r=!1}){const{i18n:i}=d(),{value:a,handleInput:c,handleBlur:u}=function({defaultEmail:e}){const{monorail:n,source:t,checkout:r,shop:i}=d(),{autoOptIn:a,isOptedIn:l}=U(),[c,u]=P(e),s=W(void 0),p=w((()=>{c!==s.current&&(s.current=c,n.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:o(o({},Z(t,r,i)),{},{action:"update_email_input",email:c,source:"checkout_page",trigger:a&&l?"auto":"manual"})}))}),[a,l,c,n,t,r,i]);return{value:c,handleInput:e=>{u(e)},handleBlur:()=>{p()}}}({defaultEmail:e});return l(Q,{id:"email",name:"email",label:r?i.translate("shop_pay_remember_me.email_label_optional"):i.translate("shop_pay_remember_me.email_label"),value:a,onInput:e=>{c(e),null==n||n(e)},onBlur:()=>{u(),null==t||t()},required:!1})}function un(){const e=K(void 0),n=K(void 0),{i18n:t,wallets:r}=d(),i=O(),[,a]=X(),c=J(),u=i.shippingAddress.fields.firstName.value,s=ee("shipping"),p=!ne((()=>null!=s?s:c),[s,c]).isRequired("firstName")&&!te(u),m=w((e=>{if(!te(e))return t.translate("field_errors.address_first_name_blank")}),[t]),h=w((o=>{if(!p||r.activeSession)return;if(!te(o))return n.value=ie.InvalidOptInName,t.translate("field_errors.address_first_name_blank");const i=e.peek()||"";a({optInFirstName:i})}),[p,e,a,t,n,r]),_=K(void 0),v=r.activeSession?_:n,y=oe(e,n,m);return re(e,v,h,ie.InvalidOptInName),p?l(V,{children:l(ae,o({name:"shopFirstName",label:t.translate("contact.first_name_label"),required:!0},y))}):null}function sn({countryCode:e,validationError:n,value:t,accessoryVariant:r="country",errorVariant:i="long",showOptionalLabel:a=!1,onBlur:c=()=>{},onInput:u=()=>{}}){const{i18n:s,monorail:m,source:h,checkout:_,shop:v}=d(),y=W(""),b=w((e=>{m.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:o(o({},Z(h,_,v)),{},{action:"update_phone_input",phoneNumber:y.current,source:"checkout_page",trigger:e})})}),[m,h,_,v]);N((()=>{y.current!==t&&(y.current=t,b("auto"))}),[b,t]);const f="clear"===r?l(F,{variant:"plain",onClick:()=>{null==u||u("",e),y.current=""},textDecoration:"none",children:s.translate("shop_pay_remember_me.clear")}):void 0,g=a?s.translate("shop_pay_remember_me.mobile_phone_optional"):s.translate("shop_pay_remember_me.mobile_phone_number"),I="short"===i?s.translate("shop_pay_remember_me.mobile_phone_invalid"):s.translate("general.errors.buyer_identity.phone_number_does_not_match_expected_pattern");return l(le,{error:n?l(p,{children:I}):void 0,countryCode:e,label:g,value:t,icon:"mobile",prefillCountryCode:Boolean(e),accessory:f,hideCountries:Boolean(f),onInputValueChange:n=>{null==u||u(n,e),y.current=n},onBlur:()=>{b("manual"),null==c||c()},onSelectedCountryChange:(e,n)=>{null==u||u(n,e),y.current=n}})}const pn="RememberMeCheckbox";function mn(){const{monorail:e,shop:n,source:t,checkout:r}=d(),i=O(),{value:a}=f(),{autoOptIn:c,isOptedIn:u}=U(),{storeOptOutPreference:s}=ce(),[p,m]=X(),h=p||c&&void 0===p,_=ue(se)&&Boolean(pe(i.paymentLines.value,"APPLE_PAY")),v=me((()=>!i.phone.value)),{shopPayOptInPhone:y}=a||{},b=de(),[g,I]=P(b),T=he(),[k,C]=P([]),E=k.includes(pn)||Boolean(p),S=!v.value||_,{validate:j,error:R}=_e(g,E,S),A=ve(),B=ye(g),L=W(B),[D,G]=P(p&&p.vaultPhone||y||B||""),[M,F]=P(p&&(null==p?void 0:p.vaultEmail)||i.email.value||""),$=w(((i,a)=>{e.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:o(o({},Z(t,r,n)),{},{action:i,phoneNumber:a.phone,email:a.email,source:"checkout_page",trigger:c&&u?"auto":"manual"})})}),[e,t,r,n,c,u]),H=w((e=>{j(e,g)||T("violationError",{error:{message:"The specified phone number does not match the expected pattern",code:"remember_me_phone_error",field:"phone",origin:"client",type:"inline-validation"},timestamp:new Date})}),[g,j,T]),q=w(((e,n)=>{if(!k.includes(pn))return;I(n),G(e);const t=A(e,n);m({optInPhone:null!=t?t:e,optInEmail:""})}),[m,A,k]),Q=w((e=>{F(e);const n=A(i.phone.value,g);m({optInPhone:null!=n?n:i.phone.value,optInEmail:e})}),[A,i.phone,m,g]),K=w((e=>{C(e);const n=e.includes(pn),t=p&&p.vaultPhone||y||B||D,o=p&&p.vaultEmail||M;G(t),F(o);const r=A(t,g),i=v.value?"":o;m(!!n&&{optInPhone:null!=r?r:t,optInEmail:i}),s(!n),n&&t&&j(t,g),$(n?"click_remember_me_box":"unclick_remember_me_box",{phone:t,email:o})}),[g,M,A,j,D,$,m,y,B,p,v,s]);return N((()=>{if(!k.includes(pn)||!c)return;if(!1===p)return;const e=!D||""===D,n=B||y||void 0;e&&n&&n!==L.current?(q(n,g),H(n),L.current=n):e||(L.current=n)}),[k,D,g,B,y,p,q,c,$,H]),N((()=>{I(b)}),[b]),N((()=>{C(h?[pn]:[])}),[h]),N((()=>{E&&D&&j(D,g)}),[]),N((()=>{if(e.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:o(o({},Z(t,r,n)),{},{elementType:"remember_me_box",source:"checkout_page"})}),c&&u){const e=v.value?"":M;$("click_remember_me_box",{phone:D,email:M}),m({optInPhone:D,optInEmail:e})}}),[c,e,t,r,n,$]),l(Y,{name:"RememberMe",value:k,variant:"group",onChange:K,children:l(z,{id:pn,details:_?void 0:l(V,{children:[l(un,{}),v.value?l(sn,{countryCode:g,validationError:R,value:D,onInput:q,onBlur:()=>H(D)}):l(cn,{value:M,onInput:Q}),u?null:l(x,{children:l($e,{field:v.value?"phone":"email",link:null})})]}),children:l(dn,{})})})}function dn(){const{i18n:e}=d(),n=be();return l(p,n?{children:e.translate("shop_pay_remember_me.payment_information_only_label")}:{children:e.translate("shop_pay_remember_me.label")})}const hn={OptionalChipWrapper:"_5r6et"};function _n(){const{i18n:e,monorail:n,source:t,checkout:r,shop:i,shop:{name:a}}=d(),u=O(),{value:s}=f(),m=qe();!function(){var e,n;const{geolocation:t}=fe(),{telemetryClient:o}=d(),r=ge(Ie),i=null==r||null===(e=r.find((e=>e.clientHandle===Te)))||void 0===e?void 0:e.variant,a=null==r||null===(n=r.find((e=>e.clientHandle===Oe)))||void 0===n?void 0:n.variant,l=!Pe(t.country.code);N((()=>{l&&Boolean(a)&&o.counter({name:"remember_me_experiment_issue",value:1,attributes:{type:"non_gdpr_experiment_assignment_to_user_inside_gdpr_protection",is_inside_gdpr_protection:l,country_code:t.country.code,gdpr_variant:i,non_gdpr_variant:a}}),i&&a&&o.counter({name:"remember_me_experiment_issue",value:1,attributes:{type:"conflict_between_experiments",is_inside_gdpr_protection:l,country_code:t.country.code,gdpr_variant:i,non_gdpr_variant:a}})}),[l,a,i,o,t.country.code])}();const{autoOptIn:h}=U(),{storeOptOutPreference:_}=ce(),[v,y]=X(),b=ue(se)&&Boolean(pe(u.paymentLines.value,"APPLE_PAY")),g=u.phone.value,I=u.email.value;let T;T=b?null:g?"email":"phone";const{shopPayOptInPhone:k}=s||{},C=de(),[j,R]=P(C),A=he(),B="phone"!==T||b||!v,{validate:L,error:D}=_e(j,!0,B),z=ve(),[G,M]=ke(Ce.ShopPayRememberMeOptInAuto),F=!!v&&Boolean(G),$=ye(j),H=v&&v.vaultPhone;let q="";q=H||k||("GDPR"===m.segment?$||"":"Non-GDPR"===m.segment?h&&$||"":$||"");const Y=F||!H&&q.trim().length>0,[Q,K]=E(yn,{value:q,isPrefilled:Y,wasEverPrefilled:Y}),[J,ee]=P(v&&(null==v?void 0:v.vaultEmail)||I||""),ne="GDPR"===m.segment&&Q.wasEverPrefilled||b,te=w((e=>{L(e,j)||A("violationError",{error:{message:"The specified phone number does not match the expected pattern",code:"remember_me_phone_error",field:"phone",origin:"client",type:"inline-validation"},timestamp:new Date})}),[j,L,A]),oe=w((({type:e,value:n})=>{var t,o;if(0===n.trim().length&&!ne)return y(!1),_(!0),void M(!1);const r=null!==(t=z(n,j))&&void 0!==t?t:n;return v&&v.vaultPhone===r&&""===(null!==(o=v.vaultEmail)&&void 0!==o?o:"")?void 0:ne&&Boolean(v)?(y({optInPhone:r,optInEmail:""}),void M(!1)):void(ne||(y({optInPhone:r,optInEmail:""}),_(!1),M("prefill"===e)))}),[j,z,ne,y,M,v,_]),re=w((e=>{if(0===e.trim().length&&!ne)return y(!1),_(!0),void M(!1);const n=u.phone.value,t=z(n,j);v&&v.vaultPhone===t&&v.vaultEmail===e||(y({optInPhone:null!=t?t:n,optInEmail:e}),_(!1),M(!1))}),[ne,u.phone,j,v,z,y,_,M]),ie=w(((e,{isAuto:n=!1}={})=>{if(M(n&&e),e){var t;_(!1);const e=null!==(t=z(Q.value,j))&&void 0!==t?t:Q.value;y("phone"===T?{optInPhone:e,optInEmail:""}:{optInPhone:e,optInEmail:J})}else _(!0),y(!1),K({type:"input",value:""}),ee("")}),[T,J,Q,j,y,_,M,z,K,ee]);N((()=>{b&&h&&void 0===v&&ie(!0,{isAuto:!0})}),[h,b,v,ie]);const ae=W(null);N((()=>{if("phone"!==T)return;if("Non-GDPR"===m.segment&&!h)return;const e=($||k||"").trim();0!==e.length&&e!==ae.current&&void 0===v&&(ae.current=e,te(e),K({type:"prefill",value:e}),"Non-GDPR"===m.segment&&oe({type:"prefill",value:e}))}),[v,T,m.segment,h,Q.value,$,k,te,oe]),N((()=>{R(C)}),[C]),N((()=>{ne&&n.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:o(o({},Z(t,r,i)),{},{elementType:"remember_me_experimental_checkbox",source:"checkout_page"})})}),[ne,n,t,r,i]),N((()=>{n.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:o(o({},Z(t,r,i)),{},{elementType:"remember_me_box",source:"checkout_page"})}),Q.value&&te(Q.value)}),[]);let le,me,be,Ae="country";"Non-GDPR"===m.segment&&Q.isPrefilled&&(Ae="clear"),b?(me=!1,le=!0,be="consent_with_checkbox_only"):ne?(le=!1,me=!1,be="consent_with_checkbox_optional_no_brackets"):(le=!1,me=!0,be="consent_with_phone");let Be=null;if("phone"===T?Be=l(sn,{countryCode:j,validationError:D,value:Q.value,accessoryVariant:Ae,errorVariant:"short",showOptionalLabel:me,onInput:(e,n)=>{K({type:"input",value:e}),oe({type:"input",value:e}),R(n)},onBlur:()=>te(Q.value)}):"email"===T&&(Be=l(cn,{value:J,onInput:e=>{ee(e),re(e)},showOptionalLabel:me})),m.variant===Ee.Treatment1||m.variant===we.Treatment1){const n=l(Ne,{spacing:"small400",children:[l(p,{children:e.translate("shop_pay_remember_me.label")}),le&&l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.optional_chip")})]});return l(V,{children:[l(Ne,{children:ne?l(xe,{id:"remember_me_checkbox",checked:Boolean(v),onChange:ie,label:n}):l(x,{children:n})}),Be,l(vn,{variant:be})]})}if(m.variant===Ee.Treatment2||m.variant===we.Treatment2){const n=l(Ne,{spacing:"small400",blockAlignment:"center",children:[l(S,{level:3,children:e.translate("shop_pay_remember_me.label_shop_benefit")}),le&&l(Se,{className:hn.OptionalChipWrapper,children:l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.optional_chip")})})]});return l(c,{border:"base",cornerRadius:"base",padding:"base",children:l(V,{spacing:"base",children:[l(V,{spacing:"small100",children:[l(je,{direction:"inline",justifyContent:"space-between",children:[l(Ne,{spacing:"base",blockAlignment:"center",children:ne?l(xe,{id:"remember_me_checkbox",checked:Boolean(v),onChange:ie,label:n}):n}),l(Re,{color:"branded",size:"medium"})]}),l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.value_prop_shop_name",{shop_name:a})})]}),Be,l(vn,{variant:be})]})})}return null}function vn({variant:e}){const{i18n:n}=d(),t={terms_href:l(Ae,{target:"_blank",href:"https://www.shopify.com/legal/privacy/app-users",tone:"monochrome",children:n.translate("shop_pay_remember_me.terms")}),privacy_href:l(Ae,{target:"_blank",href:"https://shop.app/terms-of-service",tone:"monochrome",children:n.translate("shop_pay_remember_me.privacy_policy")})};return l(p,"consent_with_phone"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_phone",t)},e)}:"consent_with_checkbox"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox",t)},e)}:"consent_with_checkbox_only"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox_only",t)},e)}:{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox_optional_no_brackets",t)},e)})}function yn(e,n){switch(n.type){case"prefill":return{value:n.value,isPrefilled:!0,wasEverPrefilled:!0};case"input":return{value:n.value,isPrefilled:!1,wasEverPrefilled:e.wasEverPrefilled}}}function bn(){return qe().isTreatment?l(_n,{}):l(mn,{})}const fn={"aria-label":"Shop",style:{fill:"var(--x-default-color-icon)",width:44,height:17}};function gn(){const{i18n:e}=d(),n=e.translate("shop_pay_remember_me.secure_label");return l(Le,{columns:["fill","auto"],children:[l(Le,{columns:["auto","fill"],spacing:"small400",blockAlignment:"center",children:[l(De,{size:"small-200",type:"lock"}),l(u,{color:"subdued",type:"small",children:n})]}),l(c,{children:l(ze,o({},fn))})]})}}}}))}();
