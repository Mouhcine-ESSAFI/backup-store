!function(){function e(e,n,t,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(r,o)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=n.apply(t,r);function l(n){e(a,o,i,l,c,"next",n)}function c(n){e(a,o,i,l,c,"throw",n)}l(void 0)}))}}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function r(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n,t){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}System.register(["./app-legacy.CVtZXpP_.js","./RememberMeDescriptionText-legacy.DFa_a7Ka.js","./ShopPayOptInDisclaimer-legacy.BG6XXIar.js"],(function(e,t){"use strict";var o,i,a,l,c,u,s,p,m,d,h,_,v,y,b,f,g,I,T,O,P,C,k,E,w,N,x,j,S,R,A,B,L,D,z,F,G,M,V,$,H,U,q,W,X,Y,Q,Z,J,K,ee,ne,te,re,oe,ie,ae,le,ce,ue,se,pe,me,de,he,_e,ve,ye,be,fe,ge,Ie,Te,Oe,Pe,Ce,ke,Ee,we,Ne,xe,je,Se,Re,Ae,Be,Le,De,ze,Fe,Ge,Me,Ve,$e,He,Ue;return{setters:[e=>{o=e.jN,i=e.jO,a=e.d$,l=e.a,c=e.T,u=e.ao,s=e.j,p=e.at,m=e.jP,d=e.i,h=e.jQ,_=e.eU,v=e.jR,y=e.jS,b=e.hL,f=e.jT,g=e.iF,I=e.jU,T=e.ie,O=e.n,P=e.aF,C=e._,k=e.i_,E=e.jV,w=e.z,N=e.aN,x=e.R,j=e.aX,S=e.an,R=e.S,A=e.aS,B=e.jW,L=e.jX,D=e.jY,z=e.bQ,F=e.W,G=e.al,M=e.jZ,V=e.a_,$=e.cg,H=e.ah,U=e.aU,q=e.eT,W=e.j_,X=e.j$,Y=e.aM,Q=e.em,Z=e.gP,J=e.k0,K=e.cl,ee=e.k1,ne=e.k,te=e.cn,re=e.cv,oe=e.aO,ie=e.aP,ae=e.k2,le=e.cw,ce=e.k3,ue=e.D,se=e.jz,pe=e.w,me=e.gM,de=e.k4,he=e.dy,_e=e.k5,ve=e.k6,ye=e.k7,be=e.k8,fe=e.au,ge=e.ay,Ie=e.az,Te=e.aB,Oe=e.aA,Pe=e.aC,Ce=e.k9,ke=e.gF,Ee=e.aw,we=e.ax,Ne=e.ar,xe=e.ka,je=e.cO,Se=e.cN,Re=e.hq,Ae=e.aD,Be=e.kb,Le=e.bf,De=e.as,ze=e.kc,Fe=e.dU,Ge=e.aK,Me=e.kd,Ve=e.b8},e=>{$e=e.R,He=e.u},e=>{Ue=e.u}],execute:function(){var qe=document.createElement("style");qe.textContent="._5r6et{margin-bottom:1px}\n/*$vite$:1*/",document.head.appendChild(qe),e({L:function({localizationExtension:e,index:n}){var t;const o=Ge(),{negotiate:i}=C(),[a,c]=P(),[u,s]=P(),p=re(e.fields.value,o),m=e.fields.title.value,{localizedFieldErrors:d}=Me(),h=`$.cart.localizedField.${e.peek().key}`,_=`$.localizationExtension[${n}]`,v=d.find((({target:e})=>e===h)),y=e=>{var n;const t=null===(n=e.violations)||void 0===n?void 0:n.find((e=>{const{code:n,localizedMessage:t,nonLocalizedMessage:r,target:o}=e;if("LOCALIZATION_EXTENSION_FIELD_ERROR"===n&&o===_)return null!=t?t:r}));if(!t)return;const{localizedMessage:r,nonLocalizedMessage:o}=t;return null!=r?r:o};return N((()=>{o.value=v?v.message:u||void 0}),[o,v,u,a]),Ve((e=>{s(y(e)),c("submit")})),l(ae,r(r({},p),{},{label:m,name:m,onBlur:()=>{p.onBlur(),c(void 0),s(void 0),i({fieldsToResolve:["localizationExtensions"],include:[],onComplete:e=>{s(y(e)),c("blur")}})},value:null!==(t=p.value)&&void 0!==t?t:void 0}))},R:function({variant:e}){const{i18n:n}=d(),t=He(),r=Ue(),o=O();if(N((()=>{o.shopPayRememberMeVisible.value=t}),[t,o.shopPayRememberMeVisible]),!t)return null;if("minimal"===e)return l(x,{children:[l(S,{spacing:"small100"}),l(bn,{})]});const i=l(Fe,{sectionId:"rememberMe",children:l(bn,{})}),a=r.isTreatment?n.translate("shop_pay_remember_me.label"):n.translate("shop_pay_remember_me.title");return"compact"===e?l(A,{accessibilityLabel:a,children:l(F,{children:[l(j,{level:2,children:a}),i]})}):l(F,{spacing:"none",children:[!r.isTreatment&&l(j,{level:2,children:a}),l(S,{}),i,l(S,{spacing:"small100"}),!r.isTreatment&&l(gn,{})]})},T:function({renderInSection:e,hideHeading:n}){const{i18n:t}=d(),r=l(x,{children:[!n&&l(x,{children:[l(j,{level:2,children:t.translate("tips.title")}),l(S,{})]}),l(on,{})]});return e?l(A,{accessibilityLabel:t.translate("tips.title"),padding:R.default("base large-200").when({viewportInlineSize:{min:"extraSmall"}},"none none large-200 none"),children:r}):l(c,{accessibilityLabel:t.translate("tips.title"),children:r})}}),e("P",o({load:()=>i((()=>t.import("./PostPurchaseShouldRender-legacy.DZs3hBBl.js").then((e=>e.P))),void 0)}));const We="0";function Xe({label:e}){const n=a();return l(m,{id:We,ref:n("tipping_none"),children:l(c,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill",children:l(u,{children:s()?e:l(p,{type:"strong",children:e})})})})}function Ye({tipOption:e}){const{amount:n,percentage:t}=e,{i18n:r}=d(),o=r.numberFormatter({style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),i=a();return l(m,{id:n.amount.toString(),ref:i(`tipping_percent_${t}`),children:l(c,{inlineAlignment:"center",blockAlignment:"center",minBlockSize:"fill",children:[l(u,{children:o.format(t)}),l(u,{type:"small",color:"subdued",children:r.formatCurrency(n.amount,{currency:n.currencyCode,form:"short"})})]})})}function Qe({tipOptions:e,onChange:n,proposedTip:t}){var r,o;const{i18n:i}=d();return l("div",{style:h({[b.toggleButtonGroup.blockPadding]:b.spacing.small200}),children:l(_,{padding:"small200",children:l(v,{value:null!==(r=null==t||null===(o=t.amount)||void 0===o||null===(o=o.amount)||void 0===o?void 0:o.toString())&&void 0!==r?r:We,onChange:n,children:l(y,{columns:e.map((()=>"fill")),spacing:"none",children:e.map((e=>e.amount.amount>0?l(Ye,{tipOption:e},e.amount.amount.toString()):l(Xe,{label:i.translate("tips.no_tip_label")},"zero-amount")))})})})})}function Ze(e,n){switch(n.type){case"NEGOTIATION_START":return r(r({},e),{},{loading:!0});case"INPUT":return r(r({},e),{},{customTip:n.payload,dirty:(t=n.payload,o=e.negotiatedTip,!(!o&&t.amount===We)&&parseFloat(t.amount)!==(null==o?void 0:o.amount.amount)),error:void 0});case"NEGOTIATION_ERROR":return r(r({},e),{},{loading:!1,dirty:!1},n.payload);case"NEGOTIATION_FINISH":return r(r({},e),{},{customTip:n.payload.customTip,loading:!1,dirty:!1,negotiatedTip:n.payload.negotiatedTip});case"CLEAR":return r(r({},e),{},{customTip:n.payload});default:return e}var t,o}function Je(e){var n;if("success"===e.status||"error"===e.status)return null===(n=e.negotiated.tipLines)||void 0===n?void 0:n[0]}function Ke(e,n,t){return n&&e&&e.some((e=>e.amount.amount===n.amount.amount))||!n?"":t.formatCurrency(n.amount.amount,{currency:n.amount.currencyCode,form:"plain"})}function en(e,n){return String(e)===We?[]:[{amount:{amount:Number(e),currencyCode:n}}]}function nn({currencyCode:e,tipOptions:n}){return`currency: ${e}, tipOptions: ${JSON.stringify(n)}`}const tn="tipping_list_options",rn=[];function on(){return l(B,{children:l(ln,{})})}function an({amount:{amount:e}}){return e>0}function ln(){const{i18n:e,shop:{name:t,showTipPayments:o}}=d(),i=function(){var e,n;const{shop:t}=d(),{value:r}=f(),{value:o}=g();return null!==(e=null!==(n=null==r?void 0:r.presentmentCurrency)&&void 0!==n?n:null==o?void 0:o.currencyCode)&&void 0!==e?e:t.currencyCode}(),{symbol:c,prefixed:u}=L(i,e),{value:s=rn}=D(),{state:m,invalidTipValue:h,negotiatedTip:_,proposedTip:v,onChange:b,onInput:x,onSubmit:j,clear:S}=function(e,t){I({currencyCode:e,tipOptions:t},nn);const{value:r}=T(),o=null==r?void 0:r[0],{i18n:i}=d(),a=Ke(t,o,i),{tipLines:l}=O(),c=l.value[0],[u,s]=P(""),{negotiate:p}=C(),m=k(),[h,_]=E(Ze,{loading:!1,dirty:!1,negotiatedTip:o,customTip:{amount:a,currencyCode:e}}),v=w((()=>{_({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[e]),y=w(function(){var e=n((function*(e){const n=null==t?void 0:t.find((({amount:n})=>n.amount===Number(e)));if(!n)return;const r=en(n.amount.amount,n.amount.currencyCode),o={amount:e,currencyCode:n.amount.currencyCode};l.value=r,yield p({onComplete:e=>{const n=Je(e);_({type:"NEGOTIATION_FINISH",payload:{customTip:o,negotiatedTip:n}}),v()}})}));return function(n){return e.apply(this,arguments)}}(),[t,l,p,v]),b=w(n((function*(){_({type:"NEGOTIATION_START"});const n=en(h.customTip.amount,e);l.value=n,yield p({onComplete:n=>{const r=function(e){var n,t;return"success"!==e.status&&"error"!==e.status||null===(n=null===(t=e.violations.find((e=>"ConfirmChangeViolation"===e.__typename)))||void 0===t?void 0:t.localizedMessage)||void 0===n?null:n}(n),o={amount:Ke(t,Je(n),i),currencyCode:e},a=Je(n),l=i.formatCurrency(Number(h.customTip.amount),{currency:o.currencyCode,form:"short"}),c=r?{type:"NEGOTIATION_ERROR",payload:{customTip:o,error:r}}:{type:"NEGOTIATION_FINISH",payload:{customTip:o,negotiatedTip:a}};r&&(s(l),m()),_(c)}})})),[h.customTip.amount,e,l,p,t,i,m]),f=w((n=>{_({type:"INPUT",payload:{amount:"undefined"===n?We:n,currencyCode:e}})}),[e]),g=w(n((function*(){l.value=[],yield p({onComplete:v})})),[v,p,l]);return N((()=>{""===a&&_({type:"CLEAR",payload:{amount:"",currencyCode:e}})}),[a,e]),{state:h,negotiatedTip:o,invalidTipValue:u,proposedTip:c,onChange:y,onInput:f,onSubmit:b,clear:g}}(i,s),A=null!=_?_:v,B=A&&A.amount.amount>0,{loading:W,dirty:X,customTip:Y,error:Q}=m,[Z,J]=P(o||B?[tn]:[]),K=u?{prefix:c}:{suffix:c},ee="TipsInput",ne=w((e=>{J(e),0===e.length&&S()}),[S]),te=a(),re=parseFloat(Y.amount),oe=isNaN(re)||0===re?void 0:re.toString();return l(q,{name:"tipping_list",value:Z,onChange:ne,variant:"group",hideRadioButton:o,children:l(z,{id:tn,details:l(F,{children:[(ie=s,Boolean(null==ie?void 0:ie.some(an))&&l(Qe,{tipOptions:s,onChange:b,proposedTip:v})),l(G,{onSubmit:j,children:[l(y,{columns:R.default([]).when({viewportInlineSize:{min:"small"}},["fill","auto"]),children:[l(M,r({controls:"stepper",error:Boolean(Q),id:ee,name:"tipping_custom",label:e.translate("tips.custom_label"),value:oe,onInput:x},K)),l(V,{variant:"primary",type:"submit",loading:W,disabled:!X,ref:te("tipping_custom_submit"),children:_&&_.amount.amount>0?e.translate("tips.update_tip"):e.translate("tips.add_tip")})]}),Q&&l($,{errorType:H.InputInvalid,message:Q,errorValue:h,children:l(U,{controlID:ee,children:Q})})]}),l(p,{children:e.translate("tips.message")})]}),children:e.translate("tips.description",{shop_name:t})})});var ie}function cn({value:e,onInput:n,onBlur:t,showOptionalLabel:o=!1}){const{i18n:i}=d(),{value:a,handleInput:c,handleBlur:u}=function({defaultEmail:e}){const{monorail:n,source:t,checkout:o,shop:i}=d(),{autoOptIn:a,isOptedIn:l}=X(),[c,u]=P(e),s=Y(void 0),p=w((()=>{c!==s.current&&(s.current=c,n.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:r(r({},Q(t,o,i)),{},{action:"update_email_input",email:c,source:"order_created",trigger:a&&l?"auto":"manual"})}))}),[a,l,c,n,t,o,i]);return{value:c,handleInput:e=>{u(e)},handleBlur:()=>{p()}}}({defaultEmail:e});return l(W,{id:"email",name:"email",label:o?i.translate("shop_pay_remember_me.email_label_optional"):i.translate("shop_pay_remember_me.email_label"),value:a,onInput:e=>{c(e),null==n||n(e)},onBlur:()=>{u(),null==t||t()},required:!1})}function un(){const e=Z(void 0),n=Z(void 0),{i18n:t,wallets:o}=d(),i=O(),[,a]=J(),c=K(),u=i.shippingAddress.fields.firstName.value,s=ee("shipping"),p=!ne((()=>null!=s?s:c),[s,c]).isRequired("firstName")&&!te(u),m=w((e=>{if(!te(e))return t.translate("field_errors.address_first_name_blank")}),[t]),h=w((r=>{if(!p||o.activeSession)return;if(!te(r))return n.value=ie.InvalidOptInName,t.translate("field_errors.address_first_name_blank");const i=e.peek()||"";a({optInFirstName:i})}),[p,e,a,t,n,o]),_=Z(void 0),v=o.activeSession?_:n,y=re(e,n,m);return oe(e,v,h,ie.InvalidOptInName),p?l(F,{children:l(ae,r({name:"shopFirstName",label:t.translate("contact.first_name_label"),required:!0},y))}):null}function sn({countryCode:e,validationError:n,value:t,accessoryVariant:o="country",errorVariant:i="long",showOptionalLabel:a=!1,onBlur:c=()=>{},onInput:u=()=>{}}){const{i18n:s,monorail:m,source:h,checkout:_,shop:v}=d(),y=Y(""),b=w((e=>{m.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:r(r({},Q(h,_,v)),{},{action:"update_phone_input",phoneNumber:y.current,source:"order_created",trigger:e})})}),[m,h,_,v]);N((()=>{y.current!==t&&(y.current=t,b("auto"))}),[b,t]);const f="clear"===o?l(V,{variant:"plain",onClick:()=>{null==u||u("",e),y.current=""},textDecoration:"none",children:s.translate("shop_pay_remember_me.clear")}):void 0,g=a?s.translate("shop_pay_remember_me.mobile_phone_optional"):s.translate("shop_pay_remember_me.mobile_phone_number"),I="short"===i?s.translate("shop_pay_remember_me.mobile_phone_invalid"):s.translate("general.errors.buyer_identity.phone_number_does_not_match_expected_pattern");return l(le,{error:n?l(p,{children:I}):void 0,countryCode:e,label:g,value:t,icon:"mobile",prefillCountryCode:Boolean(e),accessory:f,hideCountries:Boolean(f),onInputValueChange:n=>{null==u||u(n,e),y.current=n},onBlur:()=>{b("manual"),null==c||c()},onSelectedCountryChange:(e,n)=>{null==u||u(n,e),y.current=n}})}const pn="RememberMeCheckbox";function mn(){const{monorail:e,shop:n,source:t,checkout:o}=d(),i=O(),{value:a}=f(),{autoOptIn:c,isOptedIn:u}=X(),{storeOptOutPreference:s}=ce(),[p,m]=J(),h=p||c&&void 0===p,_=ue(se)&&Boolean(pe(i.paymentLines.value,"APPLE_PAY")),v=me((()=>!i.phone.value)),{shopPayOptInPhone:y}=a||{},b=de(),[g,I]=P(b),T=he(),[C,k]=P([]),E=C.includes(pn)||Boolean(p),j=!v.value||_,{validate:S,error:R}=_e(g,E,j),A=ve(),B=ye(g),L=Y(B),[D,G]=P(p&&p.vaultPhone||y||B||""),[M,V]=P(p&&(null==p?void 0:p.vaultEmail)||i.email.value||""),$=w(((i,a)=>{e.record({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:r(r({},Q(t,o,n)),{},{action:i,phoneNumber:a.phone,email:a.email,source:"order_created",trigger:c&&u?"auto":"manual"})})}),[e,t,o,n,c,u]),H=w((e=>{S(e,g)||T("violationError",{error:{message:"The specified phone number does not match the expected pattern",code:"remember_me_phone_error",field:"phone",origin:"client",type:"inline-validation"},timestamp:new Date})}),[g,S,T]),U=w(((e,n)=>{if(!C.includes(pn))return;I(n),G(e);const t=A(e,n);m({optInPhone:null!=t?t:e,optInEmail:""})}),[m,A,C]),W=w((e=>{V(e);const n=A(i.phone.value,g);m({optInPhone:null!=n?n:i.phone.value,optInEmail:e})}),[A,i.phone,m,g]),Z=w((e=>{k(e);const n=e.includes(pn),t=p&&p.vaultPhone||y||B||D,r=p&&p.vaultEmail||M;G(t),V(r);const o=A(t,g),i=v.value?"":r;m(!!n&&{optInPhone:null!=o?o:t,optInEmail:i}),s(!n),n&&t&&S(t,g),$(n?"click_remember_me_box":"unclick_remember_me_box",{phone:t,email:r})}),[g,M,A,S,D,$,m,y,B,p,v,s]);return N((()=>{if(!C.includes(pn)||!c)return;if(!1===p)return;const e=!D||""===D,n=B||y||void 0;e&&n&&n!==L.current?(U(n,g),H(n),L.current=n):e||(L.current=n)}),[C,D,g,B,y,p,U,c,$,H]),N((()=>{I(b)}),[b]),N((()=>{k(h?[pn]:[])}),[h]),N((()=>{E&&D&&S(D,g)}),[]),N((()=>{if(e.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:r(r({},Q(t,o,n)),{},{elementType:"remember_me_box",source:"order_created"})}),c&&u){const e=v.value?"":M;$("click_remember_me_box",{phone:D,email:M}),m({optInPhone:D,optInEmail:e})}}),[c,e,t,o,n,$]),l(q,{name:"RememberMe",value:C,variant:"group",onChange:Z,children:l(z,{id:pn,details:_?void 0:l(F,{children:[l(un,{}),v.value?l(sn,{countryCode:g,validationError:R,value:D,onInput:U,onBlur:()=>H(D)}):l(cn,{value:M,onInput:W}),u?null:l(x,{children:l($e,{field:v.value?"phone":"email",link:null})})]}),children:l(dn,{})})})}function dn(){const{i18n:e}=d(),n=be();return l(p,n?{children:e.translate("shop_pay_remember_me.payment_information_only_label")}:{children:e.translate("shop_pay_remember_me.label")})}const hn={OptionalChipWrapper:"_5r6et"};function _n(){const{i18n:e,monorail:n,source:t,checkout:o,shop:i,shop:{name:a}}=d(),u=O(),{value:s}=f(),m=Ue();!function(){var e,n;const{geolocation:t}=fe(),{telemetryClient:r}=d(),o=ge(Ie),i=null==o||null===(e=o.find((e=>e.clientHandle===Te)))||void 0===e?void 0:e.variant,a=null==o||null===(n=o.find((e=>e.clientHandle===Oe)))||void 0===n?void 0:n.variant,l=!Pe(t.country.code);N((()=>{l&&Boolean(a)&&r.counter({name:"remember_me_experiment_issue",value:1,attributes:{type:"non_gdpr_experiment_assignment_to_user_inside_gdpr_protection",is_inside_gdpr_protection:l,country_code:t.country.code,gdpr_variant:i,non_gdpr_variant:a}}),i&&a&&r.counter({name:"remember_me_experiment_issue",value:1,attributes:{type:"conflict_between_experiments",is_inside_gdpr_protection:l,country_code:t.country.code,gdpr_variant:i,non_gdpr_variant:a}})}),[l,a,i,r,t.country.code])}();const{autoOptIn:h}=X(),{storeOptOutPreference:_}=ce(),[v,y]=J(),b=ue(se)&&Boolean(pe(u.paymentLines.value,"APPLE_PAY")),g=u.phone.value,I=u.email.value;let T;T=b?null:g?"email":"phone";const{shopPayOptInPhone:C}=s||{},k=de(),[S,R]=P(k),A=he(),B="phone"!==T||b||!v,{validate:L,error:D}=_e(S,!0,B),z=ve(),[G,M]=Ce(ke.ShopPayRememberMeOptInAuto),V=!!v&&Boolean(G),$=ye(S),H=v&&v.vaultPhone;let U="";U=H||C||("GDPR"===m.segment?$||"":"Non-GDPR"===m.segment?h&&$||"":$||"");const q=V||!H&&U.trim().length>0,[W,Z]=E(yn,{value:U,isPrefilled:q,wasEverPrefilled:q}),[K,ee]=P(v&&(null==v?void 0:v.vaultEmail)||I||""),ne="GDPR"===m.segment&&W.wasEverPrefilled||b,te=w((e=>{L(e,S)||A("violationError",{error:{message:"The specified phone number does not match the expected pattern",code:"remember_me_phone_error",field:"phone",origin:"client",type:"inline-validation"},timestamp:new Date})}),[S,L,A]),re=w((({type:e,value:n})=>{var t,r;if(0===n.trim().length&&!ne)return y(!1),_(!0),void M(!1);const o=null!==(t=z(n,S))&&void 0!==t?t:n;return v&&v.vaultPhone===o&&""===(null!==(r=v.vaultEmail)&&void 0!==r?r:"")?void 0:ne&&Boolean(v)?(y({optInPhone:o,optInEmail:""}),void M(!1)):void(ne||(y({optInPhone:o,optInEmail:""}),_(!1),M("prefill"===e)))}),[S,z,ne,y,M,v,_]),oe=w((e=>{if(0===e.trim().length&&!ne)return y(!1),_(!0),void M(!1);const n=u.phone.value,t=z(n,S);v&&v.vaultPhone===t&&v.vaultEmail===e||(y({optInPhone:null!=t?t:n,optInEmail:e}),_(!1),M(!1))}),[ne,u.phone,S,v,z,y,_,M]),ie=w(((e,{isAuto:n=!1}={})=>{if(M(n&&e),e){var t;_(!1);const e=null!==(t=z(W.value,S))&&void 0!==t?t:W.value;y("phone"===T?{optInPhone:e,optInEmail:""}:{optInPhone:e,optInEmail:K})}else _(!0),y(!1),Z({type:"input",value:""}),ee("")}),[T,K,W,S,y,_,M,z,Z,ee]);N((()=>{b&&h&&void 0===v&&ie(!0,{isAuto:!0})}),[h,b,v,ie]);const ae=Y(null);N((()=>{if("phone"!==T)return;if("Non-GDPR"===m.segment&&!h)return;const e=($||C||"").trim();0!==e.length&&e!==ae.current&&void 0===v&&(ae.current=e,te(e),Z({type:"prefill",value:e}),"Non-GDPR"===m.segment&&re({type:"prefill",value:e}))}),[v,T,m.segment,h,W.value,$,C,te,re]),N((()=>{R(k)}),[k]),N((()=>{ne&&n.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:r(r({},Q(t,o,i)),{},{elementType:"remember_me_experimental_checkbox",source:"order_created"})})}),[ne,n,t,o,i]),N((()=>{n.record({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:r(r({},Q(t,o,i)),{},{elementType:"remember_me_box",source:"order_created"})}),W.value&&te(W.value)}),[]);let le,me,be,Ae="country";"Non-GDPR"===m.segment&&W.isPrefilled&&(Ae="clear"),b?(me=!1,le=!0,be="consent_with_checkbox_only"):ne?(le=!1,me=!1,be="consent_with_checkbox_optional_no_brackets"):(le=!1,me=!0,be="consent_with_phone");let Be=null;if("phone"===T?Be=l(sn,{countryCode:S,validationError:D,value:W.value,accessoryVariant:Ae,errorVariant:"short",showOptionalLabel:me,onInput:(e,n)=>{Z({type:"input",value:e}),re({type:"input",value:e}),R(n)},onBlur:()=>te(W.value)}):"email"===T&&(Be=l(cn,{value:K,onInput:e=>{ee(e),oe(e)},showOptionalLabel:me})),m.variant===Ee.Treatment1||m.variant===we.Treatment1){const n=l(Ne,{spacing:"small400",children:[l(p,{children:e.translate("shop_pay_remember_me.label")}),le&&l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.optional_chip")})]});return l(F,{children:[l(Ne,{children:ne?l(xe,{id:"remember_me_checkbox",checked:Boolean(v),onChange:ie,label:n}):l(x,{children:n})}),Be,l(vn,{variant:be})]})}if(m.variant===Ee.Treatment2||m.variant===we.Treatment2){const n=l(Ne,{spacing:"small400",blockAlignment:"center",children:[l(j,{level:3,children:e.translate("shop_pay_remember_me.label_shop_benefit")}),le&&l(je,{className:hn.OptionalChipWrapper,children:l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.optional_chip")})})]});return l(c,{border:"base",cornerRadius:"base",padding:"base",children:l(F,{spacing:"base",children:[l(F,{spacing:"small100",children:[l(Se,{direction:"inline",justifyContent:"space-between",children:[l(Ne,{spacing:"base",blockAlignment:"center",children:ne?l(xe,{id:"remember_me_checkbox",checked:Boolean(v),onChange:ie,label:n}):n}),l(Re,{color:"branded",size:"medium"})]}),l(p,{color:"subdued",children:e.translate("shop_pay_remember_me.value_prop_shop_name",{shop_name:a})})]}),Be,l(vn,{variant:be})]})})}return null}function vn({variant:e}){const{i18n:n}=d(),t={terms_href:l(Ae,{target:"_blank",href:"https://www.shopify.com/legal/privacy/app-users",tone:"monochrome",children:n.translate("shop_pay_remember_me.terms")}),privacy_href:l(Ae,{target:"_blank",href:"https://shop.app/terms-of-service",tone:"monochrome",children:n.translate("shop_pay_remember_me.privacy_policy")})};return l(p,"consent_with_phone"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_phone",t)},e)}:"consent_with_checkbox"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox",t)},e)}:"consent_with_checkbox_only"===e?{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox_only",t)},e)}:{color:"subdued",type:"small",children:l(Be,{children:n.translate("shop_pay_remember_me.consent_with_checkbox_optional_no_brackets",t)},e)})}function yn(e,n){switch(n.type){case"prefill":return{value:n.value,isPrefilled:!0,wasEverPrefilled:!0};case"input":return{value:n.value,isPrefilled:!1,wasEverPrefilled:e.wasEverPrefilled}}}function bn(){return Ue().isTreatment?l(_n,{}):l(mn,{})}const fn={"aria-label":"Shop",style:{fill:"var(--x-default-color-icon)",width:44,height:17}};function gn(){const{i18n:e}=d(),n=e.translate("shop_pay_remember_me.secure_label");return l(Le,{columns:["fill","auto"],children:[l(Le,{columns:["auto","fill"],spacing:"small400",blockAlignment:"center",children:[l(De,{size:"small-200",type:"lock"}),l(u,{color:"subdued",type:"small",children:n})]}),l(c,{children:l(ze,r({},fn))})]})}}}}))}();
