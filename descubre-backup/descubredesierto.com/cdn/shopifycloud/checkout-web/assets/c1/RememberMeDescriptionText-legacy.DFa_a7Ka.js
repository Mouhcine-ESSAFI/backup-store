!function(){function e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function n(e,n,r,i,t,o,s){try{var a=e[o](s),l=a.value}catch(e){return void r(e)}a.done?n(l):Promise.resolve(l).then(i,t)}function r(e,n,r){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}System.register(["./app-legacy.CVtZXpP_.js"],(function(i,t){"use strict";var o,s,a,l,c,p,d,u,b,m,y,f,h,v,_,g,S,P,w,O,F,E,I,j,U,k,A,C,L,D,B,T,$;return{setters:[e=>{o=e.h5,s=e.sl,a=e.bJ,l=e.sm,c=e.sn,p=e.f8,d=e.bb,u=e.bC,b=e.i,m=e.ay,y=e.aF,f=e.bZ,h=e.fL,v=e.j,_=e.n,g=e.fo,S=e.cc,P=e.le,w=e.D,O=e.gO,F=e.jz,E=e.iv,I=e.so,j=e.eg,U=e.kw,k=e.sp,A=e.bN,C=e.a,L=e.kb,D=e.at,B=e.aD,T=e.as,$=e.R}],execute:function(){i({R:function({field:e="phone",link:n}){const{i18n:r}=b();return C($,{children:[C(D,{color:"subdued",children:C(L,{children:["phone"===e?r.translate("shop_pay_remember_me.description_html"):r.translate("shop_pay_remember_me.email_description_html")," ",n]})}),C(N,{})]})},a:function(){var e;const r=u(),{telemetryClient:i}=b(),s=m("session-token"),[a,l]=y(),[c,p]=y("idle"),d=o(),f=null==d||null===(e=d.orderIdentity)||void 0===e?void 0:e.id;function h(){var e;return e=function*(e){if(p("loading"),l(void 0),!s||!f)return p("failed"),l("SUBSCRIPTION_FAILED"),void i.error(new x("Missing sessionToken or orderId"));const{data:n}=yield r.mutate(t,{variables:{sessionToken:s,orderId:f,email:e}});if(n){const{__typename:e}=null==n?void 0:n.subscribeForShippingUpdates;switch(e){case"SubscribeForShippingUpdatesSuccess":return void p("subscribed");case"SubscribeForShippingUpdatesFailure":return p("failed"),void l(null==n?void 0:n.subscribeForShippingUpdates.code);default:p("idle"),i.error(new x("Undefined subscribeForShippingUpdates type"))}}},h=function(){var r=this,i=arguments;return new Promise((function(t,o){var s=e.apply(r,i);function a(e){n(s,t,o,a,l,"next",e)}function l(e){n(s,t,o,a,l,"throw",e)}a(void 0)}))},h.apply(this,arguments)}return{submitSubscribeForShippingUpdate:function(e){return h.apply(this,arguments)},status:c,error:a}},b:function(){var e;const n=o();if(null!=n&&null!==(e=n.orderIdentity)&&void 0!==e&&e.id)return Number(d(n.orderIdentity.id))},c:R,d:function(){const e=R(),n=Boolean(null==e?void 0:e.shopAppEligible),r=Boolean(null==e?void 0:e.shopAppQrCodeKillswitch);return n&&!r},e:function(){const e=s(),n=R();return e&&Boolean(null==n?void 0:n.installmentsHighlightEligible)},f:function(){var e;const{purchasingCompany:n}=a(),r=l(),i=c(),t=p();return i&&!(null!=t&&null!==(e=t.value)&&void 0!==e&&e.email)&&!n&&!r},u:function(){const{cart:e,embed:n,mobileCheckoutSdk:r,shopPay:i}=b(),{purchasingCompany:t}=a(),o=f(),s=h(),l=v(),c=R(),p=_().paymentLines.value,{value:d}=g(),{currentDetour:u}=S(),m=P(),y=!w(O),A=w(F),{shopPayAvailableForSellerOfRecord:C}=E(),{hasSavedCreditCards:L}=I(),D=j(),B=e.proposal.negotiated.fields.mustSelectProvidedAddress.value,T=U().searchParams.get(k);if(!1===(null==m?void 0:m.shopPayOptInEnabled))return!1;if(t)return!1;if(!C)return!1;if("CustomerProfile"===(null==o?void 0:o.__typename)&&s){if(!l)return!1;if(!L)return!1}return!i.userIdentified&&(!i.isActive&&(!T&&(!B&&(!Boolean(n)&&!r.enabled&&((!A||null==c||!c.shopPayOrder)&&("thankYou"===(null==u?void 0:u.type)?!!d&&z({paymentLines:d.lines,isIdealEnabledForShopPay:D,isUsdcEnabled:y,isApplePayFlagEnabled:A}):z({paymentLines:p,isIdealEnabledForShopPay:D,isUsdcEnabled:y,isApplePayFlagEnabled:A})))))))}});const t={id:"0c62c3aaedf84bd307e1134828e5fcc88a47d83c453c97544a6cc8711e6444af",type:"mutation",name:"SubscribeForShippingUpdates",source:"mutation SubscribeForShippingUpdates($orderId:ID!,$email:String!,$sessionToken:String!){subscribeForShippingUpdates(orderId:$orderId email:$email sessionInput:{sessionToken:$sessionToken}){...on SubscribeForShippingUpdatesSuccess{__typename}...on SubscribeForShippingUpdatesFailure{code __typename}__typename}}"};class x extends Error{constructor(...e){super(...e),r(this,"name","SubscribeForShippingUpdateError")}}function R(){const n=o();if(n)return function(n){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?e(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n.shopAppLinksAndResources)}const z=({paymentLines:e,isIdealEnabledForShopPay:n,isUsdcEnabled:r,isApplePayFlagEnabled:i})=>{if(null==e||!e.length||!e[0].method)return!1;const{method:t}=e[0];var o,s,a;return"customOnsite"===t.type?Boolean((null===(o=t.paymentBrands)||void 0===o?void 0:o.includes("bogus_app_coin"))||r&&(null===(s=t.paymentBrands)||void 0===s?void 0:s.includes("usdc"))||n&&(null===(a=t.paymentBrands)||void 0===a?void 0:a.includes("ideal"))):"direct"===t.type||t.type===A.CreditCard||!(!n||"local"!==t.type||"IDEAL"!==t.name)||!(!i||"wallet"!==t.type||"APPLE_PAY"!==t.name)};function N(){const{i18n:e}=b();return C(D,{size:"small",color:"subdued",children:C(L,{children:e.translate("shop_pay_remember_me.terms_and_privacy_html",{privacy_href:C(H,{}),terms_href:C(Y,{})})})})}function Y(){const{i18n:e}=b();return C($,{children:C(B,{target:"_blank",href:"https://shop.app/terms-of-service",tone:"monochrome",accessibilityLabel:e.translate("shop_pay_remember_me.new_window_disclaimer"),children:[e.translate("shop_pay_remember_me.terms_of_service"),C(T,{type:"external",size:"small",display:"inline"})]})})}function H(){const{i18n:e}=b();return C($,{children:C(B,{target:"_blank",href:"https://www.shopify.com/legal/privacy/app-users",tone:"monochrome",accessibilityLabel:e.translate("shop_pay_remember_me.new_window_disclaimer"),children:[e.translate("shop_pay_remember_me.privacy_policy"),C(T,{type:"external",size:"small",display:"inline"})]})})}}}}))}();
