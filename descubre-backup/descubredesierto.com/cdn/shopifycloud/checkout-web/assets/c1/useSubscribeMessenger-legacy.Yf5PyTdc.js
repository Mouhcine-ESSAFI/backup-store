!function(){function e(e,n,o,i,r,t,a){try{var d=e[t](a),s=d.value}catch(e){return void o(e)}d.done?n(s):Promise.resolve(s).then(i,r)}function n(n){return function(){var o=this,i=arguments;return new Promise((function(r,t){var a=n.apply(o,i);function d(n){e(a,r,t,d,s,"next",n)}function s(n){e(a,r,t,d,s,"throw",n)}d(void 0)}))}}System.register(["./app-legacy.CVtZXpP_.js"],(function(e,o){"use strict";var i,r,t,a;return{setters:[e=>{i=e.i,r=e.z,t=e.bb,a=e.aN}],execute:function(){e({b:function({targetId:e,onLoaded:n,onClosed:t,onHidden:c,onError:u,onLoggedIn:l,onReady:h,onResized:p,onRedirectUserWithEmailOnly:y,onShareCaptchaToken:m,onEmailChange:v,skip:f=!1}){const g=r((e=>{switch(e.action){case s.Closed:return null==t?void 0:t();case s.Hidden:return null==c?void 0:c();case s.Error:return null==u?void 0:u(e.message,e.apiError,e.email);case s.Loaded:return null==n?void 0:n();case s.LoggedIn:return null==l?void 0:l(e.token,e.shop_pay_access_token);case s.Ready:return null==h?void 0:h(e.phoneNumber);case s.Resized:return null==p?void 0:p(parseInt(e.height,10));case s.RedirectWithEmailOnly:return null==y?void 0:y(e.email);case s.ShareCaptchaToken:return null==m?void 0:m(e.token);case s.EmailChanged:return null==v?void 0:v(e.email,e.isUserFound)}}),[t,c,u,n,l,h,p,y,m,v]),{environment:k}=i(),_=k.services.payShopifyCom.url;a((()=>{if(f)return;const n=({data:n,origin:i})=>{if(i!==_||!n||"string"!=typeof n||!n.includes(d))return;const[r,...t]=n.split(d);if(r===o)try{const n=JSON.parse(t.join(d));(e&&n.targetId===e||!e)&&g(n)}catch(a){}};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}}),[g,_,e,f])},p:function(e,n){var i;e&&(null===(i=e.contentWindow)||void 0===i||i.postMessage(function(e){return function(e,n={delimiter:d,messageKey:o}){return[n.messageKey,n.delimiter,JSON.stringify(e)].join("")}(e)}(n),"*"))}}),e("u",(()=>{const{environment:{services:{shopServer:e}},shop:{myshopifyDomain:o},source:{checkoutSessionIdentifier:t},url:a}=i(),d=r(function(){var i=n((function*({token:n,origin:i,analytics_trace_id:r}){const d=new URLSearchParams({token:n,origin:i,shopify_domain:o});t&&d.set("checkout_token",t),r&&d.set("analytics_trace_id",r);const s=new URL(a.shopPaySession(),e.url);return s.search=d.toString(),fetch(s.href,{method:"POST",keepalive:!0})}));return function(e){return i.apply(this,arguments)}}(),[t,o,a,e.url]);return{exchangeSessionTokenForCookie:d}})),e("a",(()=>{const{environment:{services:{shopServer:e}},shop:o}=i(),a=parseInt(t(o.id),10);return{extendBuyerIdentity:r(n((function*(){yield fetch(new URL(`/checkout/${a}/shopify_pay/extend_buyer_identity`,e.url),{method:"GET",keepalive:!0})})),[a,e.url])}}));const o="shopify_pay",d=":";var s=(e=>(e.Closed="closed",e.EmailChanged="emailChanged",e.Error="error",e.Hidden="hidden",e.Loaded="loaded",e.LoggedIn="loggedIn",e.Ready="ready",e.RedirectWithEmailOnly="redirectWithEmailOnly",e.Resized="resized",e.ShareCaptchaToken="shareCaptchaToken",e))(s||{}),c=e("S",(e=>(e.AllowNoInitialEmail="allowNoInitialEmail",e.Create="create",e.Hidden="hidden",e.OriginChanged="originChanged",e.Ready="ready",e.CheckoutQueueToken="checkoutQueueToken",e))(c||{})),u=e("M",(e=>(e.ShopifyPayUserNotFound="shopify_pay_user_not_found",e))(u||{})),l=e("A",(e=>(e.FraudGuard="fraud_guard",e.InvalidEmail="invalid_email",e.InvalidPhone="invalid_phone",e.LimitExceeded="limit_exceeded",e.PhoneBlocked="phone_blocked",e.RecordNotFound="record_not_found",e))(l||{}))}}}))}();
