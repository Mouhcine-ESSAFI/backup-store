!function(){const e=["anchorTo","email","queueToken","totalDue"],t=["element"];function n(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,l,"next",e)}function l(e){o(a,r,i,s,l,"throw",e)}s(void 0)}))}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}System.register(["./app-legacy.CVtZXpP_.js","./useSubscribeMessenger-legacy.Yf5PyTdc.js","./index-legacy.D6vQOFQw.js"],(function(o,i){"use strict";var s,l,c,u,d,p,h,m,f,v,g,y,k,w,b,S,j,_,x,L,P,E,A,C,M,T,N,O,I,z,D,R,V,U,$,H,B,F,q,W,G,K,Q,J,Z,Y,X,ee,te,ne,oe,re,ie,ae,se,le,ce,ue,de,pe,he,me,fe,ve,ge,ye,ke,we,be,Se,je,_e,xe,Le,Pe,Ee,Ae,Ce,Me,Te,Ne,Oe,Ie;return{setters:[e=>{s=e.i,l=e.kN,c=e.bZ,u=e.B,d=e.ga,p=e.k,h=e.gd,m=e.gh,f=e.kO,v=e.H,g=e.aF,y=e.z,k=e.d8,w=e.a,b=e.kP,S=e.aM,j=e.kQ,_=e.eA,x=e.kR,L=e.aN,P=e.aT,E=e.en,A=e.R,C=e.gn,M=e.kS,T=e.bG,N=e.kT,O=e.kU,I=e.gG,z=e.gF,D=e.kV,R=e.gt,V=e.kW,U=e.kX,$=e.kY,H=e.kZ,B=e.k_,F=e.ci,q=e.k$,W=e.l0,G=e.l1,K=e.l2,Q=e.d3,J=e.i4,Z=e.s,Y=e.l3,X=e.l4,ee=e.l5,te=e.l6,ne=e.jO,oe=e.av,re=e.l7,ie=e.ay,ae=e.az,se=e.l8,le=e.i8,ce=e.l9},e=>{ue=e.p,de=e.S,pe=e.u,he=e.a,me=e.M,fe=e.A,ve=e.b},e=>{ge=e.i,ye=e.a,ke=e.u,we=e.b,be=e.c,Se=e.d,je=e.e,_e=e.A,xe=e.f,Le=e.r,Pe=e.R,Ee=e.P,Ae=e.g,Ce=e.h,Me=e.j,Te=e.M,Ne=e.k,Oe=e.l,Ie=e.m}],execute:function(){var ze=document.createElement("style");ze.textContent='[dir=ltr] .qdHCv{left:0}[dir=rtl] .qdHCv{right:0}.qdHCv{position:absolute;z-index:1000;top:0}.hgqpU{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;background-color:rgba(0,0,0,.18);opacity:0;visibility:hidden;transition:opacity calc(var(--x-duration-base) * 5) cubic-bezier(.2,.9,.3,1)}.LTbS5{opacity:1;visibility:visible}.axmya{background-image:linear-gradient(180deg,rgba(0,0,0,0),rgba(0,0,0,.8) 55%)}.JHj7j{--popover-arrow-size: 2.5rem;position:relative;visibility:hidden;opacity:0;height:0;width:0;overflow:hidden;transform:scale(.1) matrix3d(1,0,0,0,0,.8,.5,-.002,0,-.4,.8,0,0,0,0,1);transition-timing-function:cubic-bezier(.2,.9,.3,1);transition-duration:var(--x-duration-base);transition-property:transform,opacity,block-size;transition-delay:var(--x-duration-base),var(--x-duration-base),0s}.JHj7j:after{box-shadow:0 19px 47px rgba(0,0,0,.35);content:"";z-index:-1;position:absolute;left:5%;right:5%;top:0;height:100%;width:90%;display:block}.JHj7j .hQvGd{min-width:calc(var(--popover-arrow-size) * 2)}.PMbsk:before{background-color:#fff;content:"";position:absolute;z-index:1;border-radius:var(--x-global-border-radius, var(--x-border-radius-base));display:block;transform:rotate(45deg);width:var(--popover-arrow-size);height:var(--popover-arrow-size)}.wA8HY{visibility:visible;opacity:1;height:auto;width:auto;overflow:initial;transform:scale(1) scaleZ(1)}[dir=rtl] .trTaz{transform-origin:100% 15%}[dir=rtl] .trTaz:before{top:20px;right:-8px}[dir=ltr] .trTaz{transform-origin:0% 15%}[dir=ltr] .trTaz:before{top:20px;left:-8px}.trTaz .hQvGd{min-height:calc(var(--popover-arrow-size) * 2)}[dir=rtl] .KMvI7{transform-origin:5% 0%}[dir=rtl] .KMvI7:before{left:20px;top:-8px}[dir=ltr] .KMvI7{transform-origin:95% 0%}[dir=ltr] .KMvI7:before{right:20px;top:-8px}.hQvGd{position:relative;z-index:2;display:flex;background-color:#fff;border-radius:var(--x-global-border-radius, var(--x-border-radius-base))}.xnzQ4{position:fixed;pointer-events:none;opacity:0}.B1y2m{display:block;border-radius:var(--x-global-border-radius, var(--x-border-radius-base))}\n/*$vite$:1*/',document.head.appendChild(ze);function De({children:e,offset:t,arrowOffset:n,contentWidth:o,contentHeight:r,placement:i="inlineEnd",activator:s,open:l}){const c=function(e){const[t,n]=g(null),o=y((()=>{null!==e&&n(e.getBoundingClientRect())}),[e]);return k((()=>(o(),window.addEventListener("resize",o),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)})),[o]),t}(null!=s?s:null),[u,d]=function(){const[e,t]=g(null);return[e,y((e=>{null!==e&&t(e.getBoundingClientRect())}),[])]}(),{offsets:h,spacing:m}=p((()=>{var e,s;return l?function(e,t,n,o,{offset:r=0,arrowOffset:i=0}={}){var s,l,c,u;let d={x:0,y:0},p={left:0,right:0},h=0;if(!t&&!n)return{offsets:d,spacing:h};if(!o){const{clientWidth:e,clientHeight:o}=document.documentElement;return d={x:e/2-t/2,y:o/2-n/2},{offsets:d,spacing:h}}switch(e){case"blockEnd":d={x:"rtl"===(null!==(s=null===(l=document)||void 0===l?void 0:l.dir)&&void 0!==s?s:"ltr")?o.left:o.right-t,y:o.bottom+r};break;case"inlineEnd":d={x:"rtl"===(null!==(c=null===(u=document)||void 0===u?void 0:u.dir)&&void 0!==c?c:"ltr")?o.left-t-r:o.right+r,y:o.top+o.height/2-i}}return p=function(e,t){const n=document.documentElement.clientWidth,o=e.x+t;let r={left:0,right:0};return o>n&&(r=a(a({},r),{},{right:n-o})),e.x<0&&(r=a(a({},r),{},{left:-e.x})),r}(d,t),p.right&&!p.left?(d.x+=p.right,h=-10):!p.right&&p.left&&(d.x=0,h=10),{offsets:d,spacing:h}}(i,null!==(e=o||(null==u?void 0:u.width))&&void 0!==e?e:0,null!==(s=r||(null==u?void 0:u.height))&&void 0!==s?s:0,c,{offset:t,arrowOffset:n}):{offsets:{x:0,y:0},spacing:0}}),[t,n,i,u,c,l,o,r]),{x:f,y:v}=p((()=>l?function({x:e,y:t}){const n=window.devicePixelRatio||1;return{x:Math.round(e*n)/n||0,y:Math.round(t*n)/n||0}}({x:h.x+m+(window.scrollX||window.pageXOffset),y:h.y+(window.scrollY||window.pageYOffset)}):{x:0,y:0}),[h,m,l]),S=p((()=>l?(window.devicePixelRatio||1)<2?`translate(${f}px, ${v}px)`:`translate3d(${f}px, ${v}px, 0)`:"none"),[l,f,v]);return w(b,{children:w("div",{className:"qdHCv",style:a({},u&&{transform:S,MozTransform:S,WebkitTransform:S}),ref:d,"aria-hidden":!l,children:e})})}const Re={Backdrop:"hgqpU","Backdrop-visible":"LTbS5",BackdropLinearGradient:"axmya",Popover:"JHj7j",Content:"hQvGd",PopoverArrow:"PMbsk",PopoverOpen:"wA8HY","Popover-placementInlineEnd":"trTaz","Popover-placementBlockEnd":"KMvI7",Bumper:"xnzQ4"},Ve=_("Popover");function Ue({children:e,activator:t,open:n,placement:o="inlineEnd",contentWidth:r,contentHeight:i,onClose:a}){const s=S(null),l=S(null),c=S(null),u=j(void 0,Ve),d=x(),p=y((()=>{"BUTTON"===(null==t?void 0:t.tagName)&&(null==t||t.setAttribute("aria-controls",u),null==t||t.setAttribute("aria-expanded",String(n)))}),[t,n,u]),h=y((e=>{null==a||a(e)}),[a]),m=y((e=>{var o;!(e.target instanceof Node)||null!=t&&t.contains(e.target)||!document.contains(e.target)||null!==(o=c.current)&&void 0!==o&&o.contains(e.target)||!n||h(e)}),[h,t,n,c]),f=y((e=>{if(n)switch(e.key){case"Escape":case"Esc":h(),null==t||t.focus()}}),[h,t,n]);L((()=>(document.addEventListener("click",m),()=>{document.removeEventListener("click",m)})),[m]),L((()=>(n&&document.addEventListener("keydown",f,!1),()=>{document.removeEventListener("keydown",f,!1)})),[n,f]),L((()=>{p()})),k((()=>{var e;n&&(null===(e=c.current)||void 0===e||e.focus({preventScroll:!0}))}),[n]);const v=e=>{const t=c.current;if(t){const n=e?C(t):M(t);n?n.focus():t.focus()}},g=P(Re.Popover,Re[E("Popover-placement",o)],n&&Re.PopoverOpen,t&&Re.PopoverArrow);return w(A,{children:[w(De,{activator:t,placement:o,offset:15,arrowOffset:30,open:n,contentWidth:r,contentHeight:i,children:[n&&w("button",{className:Re.Bumper,ref:s,"aria-hidden":"true",onFocus:()=>v(!1),type:"button"}),w("div",{className:g,id:u,ref:c,children:w("div",{className:Re.Content,children:e})}),n&&w("button",{className:Re.Bumper,ref:l,"aria-hidden":"true",onFocus:()=>v(!0),type:"button"})]}),w("div",{className:P(Re.Backdrop,n&&Re["Backdrop-visible"],n&&d&&Re.BackdropLinearGradient)})]})}var $e=(e=>(e.Normal="normal",e.CustomerAccount="customer_account",e.AccountsSameStore="accounts_same_store",e.AccountsCrossStore="accounts_cross_store",e))($e||{});function He({email:e,skipVerifyOnLoad:t,iframeReady:n,iframeRef:o,dismissedModalKey:r,readyToDismiss:i,onReadyToDismiss:a,showPopover:l,showToggle:u,popoverActivator:d}){const p=c(),{inMemoryPayPalParts:{accountStatus:m}}=T(),{guestDismissedModalKey:f}=N(),{shopPay:v,source:{checkoutSessionIdentifier:g}}=s(),y=O(z.ShopPayVerification,{scope:I}),k=D().current.token;return L((()=>{if(t.current&&n)return void(t.current=!1);const i=p&&R(r),a=e&&V(e),s="connected"===m.value.status,l=p&&function(){const e=sessionStorage.getItem(q);if(!e)return!1;const t=Number.parseInt(e,10);return!isNaN(t)&&Date.now()<t}();!n||!a||i||s||l||(y.peek()!==U.Verified?ue(null==o?void 0:o.current,{action:de.Create,email:e,flow:$e.Normal,disableAutoFocus:Boolean(sessionStorage.getItem(f))}):y.value=void 0)}),[e,n]),{onShow:function(){if(!g)throw new h({groupingHash:"ShopPayCheckoutIdentifierMissingError::GuestCheckout"});p&&R(r)||e&&V(e)&&(i||a(),k&&ue(null==o?void 0:o.current,{action:de.CheckoutQueueToken,queueToken:k}),v.setUserIdentified(escape(g)),$(z.SkipShopPay,"false"),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set")),y.value=U.Pending,sessionStorage.getItem(f)?null==u||u(!0):(l(!0,e),null==u||u(!1)))},onHidden:function(){var e;i&&(y.value=U.Dismissed,p&&H(r,"true"),null==d||null===(e=d.current)||void 0===e||e.focus(),l(!1),null==u||u(!0))},onLoggedIn:function(){B(),y.value=U.Verified,F.value="none"}}}const Be=[fe.FraudGuard,fe.InvalidPhone,fe.LimitExceeded,fe.PhoneBlocked];function Fe({email:e,onSetEmail:t,skipVerifyOnLoad:n,iframeReady:o,iframeRef:i,readyToDismiss:a,onReadyToDismiss:l,showPopover:c,popoverActivator:u,origin:d,open:p}){const{shopPay:f,source:{checkoutSessionIdentifier:v}}=s(),{openModal:g}=W(),{exchangeSessionTokenForCookie:k}=pe(),{extendBuyerIdentity:w}=he(),b=S(null),j=S(!1),_=y((()=>{i.current&&ue(i.current,{action:de.Create,email:"",flow:$e.Normal})}),[i]);function x(){return(x=r((function*(e){B(),F.value="none",e&&(yield k({token:e,origin:d}),w(),window.location.reload())}))).apply(this,arguments)}return L((()=>{i.current&&o&&d===m.C1ModalShopPaySignIn&&(ue(i.current,{action:de.AllowNoInitialEmail}),_(),ue(i.current,{action:de.Ready}))}),[o,i,d,_]),L((()=>{p&&(b.current=null)}),[p]),L((()=>{j.current&&i.current&&o&&(j.current=!1,_())})),L((()=>{function e(){var e;t&&(f.updateUserVerification({status:"none"}),t(""),null==u||null===(e=u.current)||void 0===e||e.focus()),j.current=!0}return window.addEventListener("shop_pay_verification_reset",e),()=>{window.removeEventListener("shop_pay_verification_reset",e)}}),[u,c,t,i,f]),L((()=>{o&&(n.current?n.current=!1:e&&V(e)&&d!==m.C1ModalShopPaySignIn?(f.updateUserVerification({email:e,status:"loading"}),ue(null==i?void 0:i.current,{action:de.Create,email:e,flow:$e.Normal})):d!==m.C1ModalShopPaySignIn&&(_(),f.updateUserVerification({status:"none"})))}),[e,o,n,i,d,f,_,c]),{onShow:function(){if(!v)throw new h({groupingHash:"ShopPayCheckoutIdentifierMissingError::ShopPayCheckout"});d===m.C1ModalShopPay&&e&&V(e)&&(a||l(),f.updateUserVerification({email:e,status:"found"}),c(!0,e))},onHidden:function(){if(d===m.C1ModalShopPay&&!a)return;const n=b.current;var o,r,i;null==t||null==n||"found"===n.status&&d!==m.C1ModalShopPay&&e||(t(null!==(o=n.email)&&void 0!==o?o:""),f.updateUserVerification(n),null==u||null===(r=u.current)||void 0===r||r.focus()),"found"===f.userVerification.status?g({type:G.ContinueWithShopPay,email:f.userVerification.email}):null==u||null===(i=u.current)||void 0===i||i.focus(),c(!1),b.current=null},onEmailChange:function(e,t){e?(b.current||f.userVerification.email!==e)&&(b.current={email:e,status:t?"found":"new"}):b.current={status:"none"}},onError:function(e,t,n){if((!n||n===f.userVerification.email)&&(e===me.ShopifyPayUserNotFound&&Be.includes(t)&&(c(!1),g({type:G.Generic})),n)){const e=t===fe.InvalidEmail;f.updateUserVerification({email:n,status:e?"invalid":"new"})}},onLoggedIn:function(e){return x.apply(this,arguments)}}}function qe({email:e,onSetEmail:t,open:n,popoverActivator:o,showPopover:r,showToggle:i,urlOrigin:a=m.C1Modal,updatedOrigin:y=a,onIframeLoaded:k}){const b=Q({base:"blockEnd",medium:"inlineEnd"}),[j,_]=g(!1),[x,P]=g(300),[E,A]=g(!1),{i18n:C,shop:M,shopPay:T,source:{checkoutSessionIdentifier:N}}=s(),O=S(null),[I,D]=g(!1),R=M.enabledFlags.includes(J)?T.isUnauthenticatedUser:"unauthenticated_user"===Z.flow.value,V=Y(e,X),U=`${N}-${e.replace(/[^a-zA-Z0-9]/g,"")}`,H=ee(),B=S(H),{onShow:q,onHidden:W,onError:G,onEmailChange:ne,onLoggedIn:oe}=function(e){const{telemetryClient:t}=s(),n=S(e),o=n.current,r=e===n.current?void 0:`Callback hook changed from ${n.current.name} to ${e.name} between renders.`;return L((()=>{r&&t.error(new K(`${r} Only the original hook is called.`,{groupingHash:"ShopPayError::OnlyOriginalHookCalled"}),{severity:"warning",errorClass:"ShopPay::ShopPayVerification::useStableHook"})}),[r,t]),o}(R?Fe:He)({email:V,onSetEmail:t,skipVerifyOnLoad:B,iframeReady:j,iframeRef:O,dismissedModalKey:U,readyToDismiss:E,onReadyToDismiss:()=>{setTimeout((()=>A(!0)),1e3)},showPopover:r,showToggle:i,popoverActivator:o,origin:y,open:n});ve({targetId:a,onReady:q,onClosed:function(){D(!0)},onLoggedIn:oe,onHidden:W,onError:function(e,t,n){null==G||G(e,t,n),e===me.ShopifyPayUserNotFound&&T.setUserIdentified(null),$(z.SkipShopPay,t===fe.LimitExceeded?N||"":"false"),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set"))},onResized:function(e){!isNaN(e)&&e&&P(e)},onLoaded:()=>{_(!0),k()},onEmailChange:ne}),L((()=>{ue(null==O?void 0:O.current,{action:de.OriginChanged,origin:y})}),[y]),L((()=>{const e=n?de.Ready:de.Hidden;ue(null==O?void 0:O.current,{action:e}),F.value=n?"shopPayVerification":"none",O.current&&n&&O.current.focus()}),[n]);const re=(e=>{const{environment:t,i18n:{locale:n},shop:{myshopifyDomain:o},source:{checkoutSessionIdentifier:r}}=s(),i=l(),a=c(),{iframe_token:g,redirect_url:y,transaction_params:k}=u(),w=d();return p((()=>{if(!r)throw new h({groupingHash:"ShopPayCheckoutIdentifierMissingError::ULCFrame"});if(!w)return;if(!g||!y)return;const s=new URLSearchParams({shopify_domain:o,checkout_token:r,origin:e,locale:n,iframe_token:g,redirect_url:y,transaction_params:null!=k?k:"",shop_pay_new_signup_login_variant:w});for(const[e,t]of i.entries())s.set(e,t);e===m.C1InlineModal&&s.set(f,v.ShopPayAsPaymentMethod),null!=a&&a.email&&s.set("fast_login","true");const l=s.toString(),c=new URL("/pay/transactions/new/email",t.services.payShopifyCom.url);return c.search=l,c.href}),[e,o,r,n,g,y,k,w,i,a,t])})(a);if(L((()=>()=>{_(!1)}),[re]),!re)return null;const ie=n?null==o?void 0:o.current:void 0;return w(Ue,{activator:ie,open:n,onClose:W,placement:b,contentWidth:320,contentHeight:x,children:w(te,{active:I||!j,size:"large",children:w("iframe",{id:"shop-pay-verification-iframe",title:C.translate("shop_pay.verification.title"),ref:O,src:re,height:x,width:320,className:"B1y2m",allow:"publickey-credentials-get *",referrerPolicy:"origin"},re)})})}function We({size:e=16,gap:t=16,className:n}){const o=e/4,r=t/4,i=2*r,a=6*o+5*r,s=2*o+i;return w(A,{children:[w("style",{dangerouslySetInnerHTML:{__html:`\n    @keyframes wave-${e}-${t} {\n      0%, 60%, 100% {\n        opacity: 0.2;\n      }\n      30% {\n        opacity: 1;\n      }\n    }\n  `}}),w("svg",{className:n,width:a,height:s,viewBox:`0 0 ${a} ${s}`,"data-testid":"connectiondots",children:[Array.from({length:6},((n,i)=>w("circle",{cx:i*(o+r)+o/2,cy:o/2,r:o/2,fill:"#e5e7eb",style:{animation:`wave-${e}-${t} 1.5s ease-in-out infinite`,animationDelay:.1*i+"s"}},`dot-top-${i}`))),Array.from({length:6},((n,a)=>w("circle",{cx:a*(o+r)+o/2,cy:o+i+o/2,r:o/2,fill:"#00D66F",style:{animation:`wave-${e}-${t} 1.5s ease-in-out infinite`,animationDelay:.1*(5-a)+"s"}},`dot-bottom-${a}`)))]})]})}function Ge({className:e}){const{translate:t}=xe(),n=String(t("stripeLinkAuth.shopLogoAriaLabel",{defaultValue:"Shop"}));return w("svg",{className:e,viewBox:"0 0 50 50",width:"100%",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":n,role:"img",children:[w("path",{d:"M50 12.5C50 5.597 44.403 0 37.5 0h-25C5.597 0 0 5.597 0 12.5v25C0 44.403 5.597 50 12.5 50h25C44.403 50 50 44.403 50 37.5v-25z",fill:"#5A31F4"}),w("path",{d:"M14.551 17.49v12.2a.09.09 0 00.092.092h2.249a.091.091 0 00.091-.091v-5.203c0-1.007.676-1.726 1.761-1.726 1.189 0 1.484.969 1.484 1.96v4.969a.09.09 0 00.027.065.09.09 0 00.066.026h2.24a.092.092 0 00.09-.091v-5.266c0-.18-.007-.357-.022-.53a4.681 4.681 0 00-.416-1.628c-.52-1.084-1.505-1.785-2.989-1.785a2.989 2.989 0 00-2.336 1.195l-.056.066V17.49a.092.092 0 00-.091-.092h-2.098a.092.092 0 00-.092.092zm-3.441 6.862s-1.088-.256-1.489-.357c-.4-.102-1.101-.328-1.101-.848 0-.544.562-.696 1.138-.696.576 0 1.21.137 1.261.771a.09.09 0 00.09.08l2.108-.008a.091.091 0 00.086-.06.092.092 0 00.005-.036c-.13-2.027-1.915-2.752-3.563-2.752-1.953 0-3.377 1.28-3.377 2.698 0 1.03.294 2 2.597 2.673.402.118.954.27 1.433.4.577.16.884.4.884.784 0 .443-.652.75-1.277.75-.916 0-1.567-.338-1.62-.946a.09.09 0 00-.09-.08l-2.104.01a.09.09 0 00-.066.028.092.092 0 00-.025.066c.096 1.914 1.951 2.945 3.68 2.945 2.57 0 3.74-1.45 3.74-2.796.003-.628-.143-2.075-2.31-2.627zm25.703-2.588V20.54a.088.088 0 00-.026-.064.09.09 0 00-.065-.027h-2.1a.09.09 0 00-.09.09v11.994a.088.088 0 00.026.064.089.089 0 00.065.026h2.249a.09.09 0 00.09-.09v-3.937h.034c.356.542 1.334 1.192 2.608 1.192 2.401 0 4.397-1.98 4.397-4.66 0-2.569-1.984-4.651-4.51-4.651-1.125 0-2.069.62-2.677 1.369v-.082zm2.468 5.747c-1.292 0-2.32-1.072-2.32-2.38 0-1.308 1.027-2.368 2.32-2.368 1.294 0 2.33 1.06 2.33 2.368 0 1.308-1.036 2.38-2.33 2.38zm-11.406-7.554c-2.096 0-3.142.708-3.983 1.28l-.024.016a.205.205 0 00-.063.275l.867 1.487a.213.213 0 00.322.056l.065-.054c.432-.36 1.086-.905 2.761-1.04.933-.074 1.74.176 2.33.72.653.601 1.044 1.57 1.044 2.594 0 1.88-1.114 3.064-2.902 3.088-1.474-.008-2.466-.774-2.466-1.906 0-.599.237-1.04.77-1.43a.207.207 0 00.061-.263l-.744-1.402a.215.215 0 00-.297-.083c-.836.493-1.822 1.446-1.767 3.182.067 2.21 1.912 3.896 4.31 3.965h.273c2.85-.092 4.907-2.198 4.907-5.048 0-2.637-1.914-5.437-5.463-5.437z",fill:"#fff"})]})}function Ke({size:e=50,className:t}){return w("div",{className:t,style:{width:`${e}px`,height:`${e}px`},"data-testid":"stripelinkicon",children:w("svg",{viewBox:"0 0 50 50",width:"100%",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w("rect",{width:"50",height:"50",rx:"12.5",fill:"#00D66F"}),w("path",{d:"M24.475 10H16.765C18.265 16.27 22.645 21.63 28.125 25C22.635 28.37 18.265 33.73 16.765 40H24.475C26.385 34.2 31.675 29.16 38.175 28.13V21.86C31.665 20.84 26.375 15.8 24.475 10Z",fill:"#011E0F"})]})})}function Qe({email:e,phoneNumber:t,onContinue:n}){const{translate:o}=xe(),r=o("stripeLinkAuth.title"),i=o("stripeLinkAuth.description"),a=o("stripeLinkAuth.continueButton"),s=String(o("stripeLinkAuth.shopTermsUrl")),l=String(o("stripeLinkAuth.privacyPolicyUrl")),c=o("stripeLinkAuth.legalText",{shopTermsLink:w("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-grayscale-d0 underline transition-colors hover_text-grayscale-d1",children:o("stripeLinkAuth.shopTerms")}),privacyPolicyLink:w("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-grayscale-d0 underline transition-colors hover_text-grayscale-d1",children:o("stripeLinkAuth.privacyPolicy")})});return w("div",{className:"w-full space-y-4",children:[w("div",{className:"space-y-4",children:[w("div",{className:"flex items-center justify-center gap-0",children:[w("div",{className:"size-10 overflow-hidden rounded-md",children:w(Ge,{})}),w(We,{size:12,gap:12}),w("div",{className:"overflow-hidden rounded-md",children:w(Ke,{size:40})})]}),w("div",{className:"flex flex-col items-center gap-2",children:[w("h2",{className:"text-center font-sans text-header-normal font-medium text-grayscale-d2",children:r}),w("p",{className:"mx-auto text-center font-sans text-body-small font-normal leading-[20px] text-grayscale-primary-light",children:i})]})]}),w("div",{className:"rounded-xl border border-grayscale-l2l bg-white p-3",children:w("div",{className:"flex items-center gap-2",children:[w(Ke,{size:36}),w("div",{className:"flex flex-col",children:[w("p",{className:"font-sans text-caption font-medium leading-[16px]",children:e}),w("p",{className:"font-sans text-caption font-normal leading-[16px] text-grayscale-d0",children:t})]})]})}),w("div",{className:"space-y-3",children:[w("button",{type:"button",onClick:n,className:"relative flex w-full items-center justify-center whitespace-nowrap rounded-md bg-purple-primary p-3 font-sans font-medium text-white outline-none transition-all hover_bg-purple-d0",children:w("span",{className:"truncate",children:a})}),w("p",{className:"text-center font-sans text-caption font-normal leading-[16px] text-grayscale-l1",children:c})]})]})}function Je(e){const{checkoutToken:t,checkoutVersion:n,shopPermanentDomain:o}=e;return{checkoutVersion:n,checkoutToken:t,flow:"checkout_modal",shopPermanentDomain:o}}const Ze=t=>{let{anchorTo:o,email:i,queueToken:s,totalDue:l}=t,c=n(t,e);const{modalVisible:u,dispatch:d}=ke(),h=S(null),m=S(null),[f,v]=g(!1),[k,b]=g(null);!function({email:e,emailInputSelector:t,hideChange:n,iframeRef:o,shouldListen:i=!0}){const{loaded:a,modalVisible:s}=ke(),{leaveBreadcrumb:l,notify:c}=we(),{trackUserAction:u}=be(),{isFilledWithPasswordManager:d}=function({emailInputSelector:e}){const[t,n]=g(),[o,r]=g();return L((()=>{function t(e){"password"===this.type?r(e.timeStamp):n(e.timeStamp)}if(e){const n=ye.querySelector(e);if(n){var o;n.addEventListener("input",t);const e=null===(o=n.form)||void 0===o?void 0:o.querySelector('input[type="password"]');return e&&e instanceof HTMLInputElement&&e.addEventListener("input",t),()=>{n.removeEventListener("input",t),e&&e.removeEventListener("input",t)}}}}),[e]),{isFilledWithPasswordManager:p((()=>void 0!==t&&void 0!==o&&Math.abs(t-o)<100),[t,o])}}({emailInputSelector:t}),h=S(null),[m,f]=g(),[v,k]=g(),[w,b]=g(),j=S(null),_=S(""),x=p((()=>new Set),[]),P=y(function(){var e=r((function*(e,t="",i=""){var p;const m=je(e);if(d&&!x.has("PASSWORD_MANAGER_AUTOFILL_DETECTED")&&(x.add("PASSWORD_MANAGER_AUTOFILL_DETECTED"),u({userAction:"PASSWORD_MANAGER_AUTOFILL_DETECTED"})),m&&!x.has("EMAIL_ENTERED")&&(x.add("EMAIL_ENTERED"),u({userAction:"EMAIL_ENTERED"})),l("email entered",{},"state"),!o.current||s)return;if(!a)return;const v=m?e:"";!h.current||null!==(p=h.current)&&void 0!==p&&p.signal.aborted||h.current.abort(),h.current=new AbortController;try{var g;const{open:e,postMessage:a,waitForMessage:s}=o.current;_.current=v,a({firstName:t,lastName:i,type:"namesubmitted"}),a({email:v,hideChange:void 0===n?v.length>0:n,type:"emailsubmitted"}),l("email submitted",{email:v?"redacted":""},"state");const c=s("shop_user_matched",h.current.signal),u=new Promise(((e,t)=>{const n=function(){var o=r((function*(){try{const t=yield s("error",h.current.signal);"error"===t.type&&"captcha_challenge"===t.code?e(void 0):yield n()}catch(o){t(o)}}));return function(){return o.apply(this,arguments)}}();n()}));yield Promise.race([c,u]),e("event_shop_user_matched"),null==j||null===(g=j.current)||void 0===g||g.blur(),function(){if(!ge())return;const e="shop-pay-safari-unzoom",t=ye.getElementById(e);if(t)return t.focus();const n=ye.createElement("input");n.id=e,n.style.fontSize="16px",n.style.width="1px",n.style.height="1px",n.style.position="fixed",n.style.bottom="-1000px",n.style.right="-1000px",n.style.transform="translate(1000px, 1000px)",n.setAttribute("aria-hidden","true"),ye.body.appendChild(n),n.focus({preventScroll:!0})}(),h.current.abort(),f(void 0)}catch(y){if(y instanceof _e&&"AbortSignalReceivedError"===y.name)return;y instanceof Error&&c(new Error(`Error updating user info: ${y.name} - ${y.message}`))}}));return function(t){return e.apply(this,arguments)}}(),[n,o,d,l,a,s,c,u,x]),E=Se(((e,t,n)=>{P(e,t,n)}),200);L((()=>{void 0!==m&&a&&E(m,v,w)}),[E,m,a,v,w]),L((()=>{if(!t)return;const e=ye.querySelector(t);if(!e)return;j.current=e;const n=()=>{e&&f(e.value)};if(null!=e&&e.value&&n(),i)return null==e||e.addEventListener("input",n),()=>{null==e||e.removeEventListener("input",n)};null==e||e.removeEventListener("input",n)}),[t,i]),L((()=>{void 0!==e&&f(e)}),[e])}({email:i,iframeRef:h});const{postMessageAfterLoad:j}=function({iframeRef:e}){const{loaded:t}=ke();function n(){return(n=r((function*(n){if(!e.current)return;const{postMessage:o,waitForMessage:r}=e.current;t||(yield r("loaded")),o(n)}))).apply(this,arguments)}return{postMessageAfterLoad:function(e){return n.apply(this,arguments)}}}({iframeRef:h}),{trackUserAction:_}=be(),{leaveBreadcrumb:x}=we(),P=y((e=>{x("stripe link user found event caught",{},"state"),e.email?(b({email:e.email,phone:e.phone}),v(!0)):x("stripe link event missing email",{event:e},"error")}),[x]);L((()=>{const e=new URL(Ee).origin,t=t=>{var n;if(t.origin===e&&"completed"===(null===(n=t.data)||void 0===n?void 0:n.type)&&(x("stripe link oauth completed from popup",{},"state"),m.current&&!m.current.closed&&(x("closing oauth popup window",{},"state"),m.current.close(),m.current=null),void 0!==Ae&&"parent"in Ae&&Ae.parent&&Ae.parent!==Ae)){x("forwarding completion to parent window",{},"state");const e="ancestorOrigins"in Ae.location?Ae.location.ancestorOrigins:void 0,t=null==e?void 0:e[0];t&&Ae.parent.postMessage({type:"completed",origin:Ee},t)}};return Ae.addEventListener("message",t),()=>{Ae.removeEventListener("message",t),m.current&&!m.current.closed&&m.current.close()}}),[x]);const E=p((()=>{return{open:(e=r((function*(){var e;u||(null===(e=h.current)||void 0===e||e.open("user_button_clicked"),_({userAction:"OPEN_CALLED"}),x("open called",{},"state"))})),function(){return e.apply(this,arguments)})};var e}),[u,_,x]);Ce(E);const{trackShopPayModalStateChange:A}=function(){const{analyticsData:e,produceMonorailEvent:t}=be();return{trackShopPayModalStateChange:y((({currentState:n,zoom:o})=>{const{analyticsTraceId:r,checkoutToken:i,checkoutVersion:a,shopPermanentDomain:s}=e,l={previousState:"",currentState:n,clientTimestampMs:(new Date).getTime(),analyticsTraceId:r,checkoutToken:i||"",checkoutVersion:a||"",shopifyDomain:s||"",zoom:o};t({event:{payload:l,schemaId:"shopify_pay_modal_state_change/1.3"}})}),[e,t])}}(),C=y((()=>{var e;A({currentState:"loaded",zoom:`${null===(e=Ae.visualViewport)||void 0===e?void 0:e.scale}`})}),[A]),M=y((e=>{var t;A({currentState:e?"shown":"hidden",zoom:`${null===(t=Ae.visualViewport)||void 0===t?void 0:t.scale}`})}),[A]);L((()=>{if(s||l){const e={totalDue:Number(l)||0,checkoutQueueToken:s||""};j({type:"checkoutcontextsubmitted",checkoutContext:e}),s&&j({type:"checkoutqueuetokensubmitted",checkoutQueueToken:s})}}),[j,s,l]);const{authorizeUrl:T}=Me(a({analyticsContext:"loginWithShopCheckoutModal",avoidSdkSession:!0,clientId:"",disableSignUp:!0,flow:"checkout_modal",proxy:!0,redirectType:"iframe",responseType:"code",uxMode:"iframe"},c)),N=y((()=>{if(x("stripe link auth completed",{},"state"),null==k||!k.email)return;const e=Boolean(Oe(Ae.location.hostname))?"mock_stripe_link":"stripe_link",t=Ie(),n=new URLSearchParams({login_hint:k.email,handle:e}),o=new URL(Ae.location.href);if(t){o.searchParams.has("skip_shop_pay")&&o.searchParams.delete("skip_shop_pay"),n.append("return_url",o.toString()),n.append("redirect_type","top_frame");const e=`${Ee}/oauth/idp_auth?${n.toString()}`;return x("in-app browser detected, using full-page redirect",{},"state"),void(Ae.location.href=e)}n.append("return_url",o.toString()),n.append("redirect_type","post_message");const r=`${Ee}/oauth/idp_auth?${n.toString()}`,i=Ae.screen.width/2-300,a=Ae.screen.height/2-350,s=Ae.open(r,"stripeLinkOAuth",`width=600,height=700,left=${i},top=${a},toolbar=no,menubar=no,location=no,status=no,resizable=yes,scrollbars=yes`);s?(x("popup opened successfully, storing reference",{},"state"),m.current=s):x("popup blocked by browser",{},"error")}),[x,k]),O=y((()=>{x("stripe link auth cancelled",{},"state"),m.current&&!m.current.closed&&(x("closing oauth popup on cancel",{},"state"),m.current.close(),m.current=null),v(!1),b(null),d({type:"hideModal",reason:"user_dismissed",dismissMethod:"close_button"})}),[x,d]);return f&&k?(x("rendering native Stripe Link UI",{email:k.email,phone:k.phone},"state"),w(Te,{anchorTo:o,hideHeader:!1,headerTitle:"",onDismiss:()=>O(),variant:"checkoutModal",visible:u,type:"default",onModalInViewport:()=>{var e;A({currentState:"shown",zoom:`${null===(e=Ae.visualViewport)||void 0===e?void 0:e.scale}`})},children:w("div",{className:"px-4 pb-4",children:w(Qe,{email:k.email,phoneNumber:k.phone||"",onContinue:N})})})):w(Ne,{anchorTo:o,keepModalOpen:!0,onLoaded:C,onModalVisibleChange:M,onStripeLinkUserFound:P,proxy:!0,ref:h,src:T,variant:"checkoutModal",scrolling:"no"})},Ye=function(){var e=r((function*(e){return yield function(e){switch(e){case"../StripeLinkAuth/translations/bg-BG.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.H))),void 0);case"../StripeLinkAuth/translations/cs.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.I))),void 0);case"../StripeLinkAuth/translations/da.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.J))),void 0);case"../StripeLinkAuth/translations/de.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.K))),void 0);case"../StripeLinkAuth/translations/el.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.L))),void 0);case"../StripeLinkAuth/translations/en.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.M))),void 0);case"../StripeLinkAuth/translations/es.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.N))),void 0);case"../StripeLinkAuth/translations/fi.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.O))),void 0);case"../StripeLinkAuth/translations/fr.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.P))),void 0);case"../StripeLinkAuth/translations/hi.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.Q))),void 0);case"../StripeLinkAuth/translations/hr-HR.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.R))),void 0);case"../StripeLinkAuth/translations/hu.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.S))),void 0);case"../StripeLinkAuth/translations/id.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.T))),void 0);case"../StripeLinkAuth/translations/it.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.U))),void 0);case"../StripeLinkAuth/translations/ja.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.V))),void 0);case"../StripeLinkAuth/translations/ko.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.W))),void 0);case"../StripeLinkAuth/translations/lt-LT.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.X))),void 0);case"../StripeLinkAuth/translations/ms.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.Y))),void 0);case"../StripeLinkAuth/translations/nb.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.Z))),void 0);case"../StripeLinkAuth/translations/nl.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e._))),void 0);case"../StripeLinkAuth/translations/pl.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.$))),void 0);case"../StripeLinkAuth/translations/pt-BR.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a0))),void 0);case"../StripeLinkAuth/translations/pt-PT.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a1))),void 0);case"../StripeLinkAuth/translations/ro-RO.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a2))),void 0);case"../StripeLinkAuth/translations/ru.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a3))),void 0);case"../StripeLinkAuth/translations/sk-SK.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a4))),void 0);case"../StripeLinkAuth/translations/sl-SI.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a5))),void 0);case"../StripeLinkAuth/translations/sv.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a6))),void 0);case"../StripeLinkAuth/translations/th.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a7))),void 0);case"../StripeLinkAuth/translations/tr.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a8))),void 0);case"../StripeLinkAuth/translations/vi.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.a9))),void 0);case"../StripeLinkAuth/translations/zh-CN.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.aa))),void 0);case"../StripeLinkAuth/translations/zh-TW.json":return ne((()=>i.import("./shopjs-locales-legacy.B3N1GyTh.js").then((e=>e.ab))),void 0);default:return new Promise((function(t,n){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}(`../StripeLinkAuth/translations/${e}.json`)}));return function(t){return e.apply(this,arguments)}}(),Xe=({shopCheckoutModal:e,eventName:t,eventListener:n})=>{L((()=>(null==e||e.addEventListener(t,n),()=>null==e?void 0:e.removeEventListener(t,n))),[n,t,e])};function et({email:e,open:o,popoverActivator:r,showPopover:i,showToggle:l,onIframeLoaded:d}){var m;const f=null==r?void 0:r.current,v=S(null),[k,b]=g(!1),j=S(!1),_=S(!1),{redirect_url:x,transaction_params:P}=u(),{shop:{myshopifyDomain:E,storefrontUrl:A},shopPay:C,source:{checkoutSessionIdentifier:M},wallets:V}=s(),$=c(),{inMemoryPayPalParts:{accountStatus:q}}=T(),{guestDismissedModalKey:W}=N(),G=D(),K=p((()=>G.current.token),[G]),{value:Q}=le(),J=function(){var e;const t=oe({key:"shop_pay_inline_otp_variant",variants:[re.Control,re.Treatment1,re.Treatment2]}),n=ie(ae);if(t)return t;const o=null==n||null===(e=n.find((e=>e.clientHandle===se)))||void 0===e?void 0:e.variant;return o===re.Control?re.Control:o===re.Treatment1?re.Treatment1:o===re.Treatment2?re.Treatment2:void 0}(),Z=p((()=>{const e={[se]:J},t=Object.fromEntries(Object.entries(e).filter((([,e])=>void 0!==e)));return Object.keys(t).length>0?JSON.stringify(t):void 0}),[J]);L((()=>{customElements.get("shop-checkout-modal")||Le((e=>{let{element:o}=e,r=n(e,t);return w(Pe,{element:o,monorailProps:Je(r),featureName:"ShopCheckoutModal",getFeatureDictionary:Ye,children:w(Ze,a({},r))})}),{methods:["open"],name:"shop-checkout-modal",props:{anchorTo:"string",checkoutRedirectUrl:"string",checkoutToken:"string",checkoutVersion:"string",email:"string",embed:"string",queueToken:"string",shopId:"number",shopPermanentDomain:"string",shopifyEssential:"string",totalDue:"string",transactionParams:"string",storefrontDomain:"string"},shadow:"open"})}),[]);const Y=O(z.ShopPayVerification,{scope:I}),X=`${M}-${e.replace(/[^a-zA-Z0-9]/g,"")}`,te=ee(),ne=S(te);L((()=>{if(ne.current)return ne.current=!1,void b(!1);const e=sessionStorage.getItem(W),t=$&&R(X),n="connected"===q.peek().status;if(!(e||t||n))return Y.peek()===U.Verified?(Y.value=void 0,void b(!1)):void b(!0);b(!1)}),[e]);const ce=y((()=>{if(B(),Y.value=U.Verified,F.value="none",_.current){null==i||i(!1),null==l||l(j.current);const e=new URL(window.location.href);e.searchParams.has("skip_shop_pay")&&e.searchParams.delete("skip_shop_pay"),e.searchParams.set("payment","shop_pay"),window.location.href=e.toString(),_.current=!1}}),[Y,i,l]);Xe({shopCheckoutModal:v.current,eventName:"completed",eventListener:ce});const ue=y((()=>{if(!M)throw new h({groupingHash:"ShopPayCheckoutIdentifierMissingError::ShopJSVerification"});C.setUserIdentified(escape(M)),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set")),Y.value=U.Pending,null==i||i(!0,e),null==l||l(!1)}),[M,e,C,Y,i,l]);Xe({shopCheckoutModal:v.current,eventName:"modalopened",eventListener:ue});const de=y((()=>{Y.value=U.Dismissed,$&&H(X,"true"),_.current=!1,null==i||i(!1),null==l||l(j.current),b(!1)}),[$,X,Y,i,l]);Xe({shopCheckoutModal:v.current,eventName:"modalclosed",eventListener:de});const pe=y((()=>{j.current=!0}),[]);Xe({shopCheckoutModal:v.current,eventName:"shopusermatched",eventListener:pe});const he=y((e=>{j.current=!1,C.setUserIdentified(null),window.dispatchEvent(new Event("shop_pay_user_identified_cookie_set"))}),[C]);Xe({shopCheckoutModal:v.current,eventName:"shopusernotmatched",eventListener:he}),Xe({shopCheckoutModal:v.current,eventName:"loaded",eventListener:d});const me=y((()=>{_.current=!0;const e=v.current;e&&(e.open(),f&&f.blur())}),[f]);return Xe({shopCheckoutModal:v.current,eventName:"stripelinkuserfound",eventListener:me}),L((()=>{const e=v.current;f&&o&&(null==e||e.open(),f.blur())}),[f,e,o]),L((()=>{if(o)return F.value="shopPayVerification",()=>{F.value="none"}}),[o]),!x||V.activeSession?null:w("shop-checkout-modal",{"anchor-to":null!=f&&f.id?`#${f.id}`:"","checkout-redirect-url":x,"checkout-token":M,"checkout-version":"checkout_one",email:o||k?e:"",experiments:Z,"queue-token":K||"","total-due":(null==Q||null===(m=Q.amount)||void 0===m?void 0:m.toString())||"0",ref:v,"shop-permanent-domain":E,"transaction-params":P,"storefront-domain":A})}const tt=e=>w(A,{children:w(et,a({},e))});o("default",(({email:e,onSetEmail:t,open:n,popoverActivator:o,showPopover:r,showToggle:i,urlOrigin:a=m.C1Modal,updatedOrigin:l=m.C1Modal})=>{const{shopPay:{isActive:c},telemetryClient:u}=s(),d=p((()=>ce()),[]),h=p((()=>ce()),[]),f=S(!0),v=p((()=>{if(void 0!==c)return{isC1:!0,shopJsVerification:!c}}),[c]);L((()=>{V(e)&&(d.mark("start"),f.current=!0)}),[d,e]),L((()=>{if(n&&f.current&&d.marks.start&&v){d.mark("open"),f.current=!1;const e=Math.round(d.marks.open-d.marks.start);u.histogram({name:"shop_pay_verification_time_to_interactive",value:e,attributes:v});const t=Math.round(d.marks.open-Math.max(d.marks.start,d.marks.loaded||0));u.histogram({name:"shop_pay_verification_time_to_interactive_after_load",value:t,attributes:v})}}),[n,u,d,v]),L((()=>{h.mark("start")}),[h]);const g=y((()=>{if(h.marks.start){h.mark("loaded"),d.mark("loaded");const e=Math.round(h.marks.loaded-h.marks.start);u.histogram({name:"shop_pay_verification_iframe_ready_duration",value:e,attributes:v})}}),[h,d,u,v]);return c?w(qe,{popoverActivator:o,email:e,onSetEmail:t,open:n,showPopover:r,showToggle:i,urlOrigin:a,updatedOrigin:l,onIframeLoaded:g}):w(tt,{popoverActivator:o,email:e,open:n,showPopover:r,showToggle:i,onIframeLoaded:g})}))}}}))}();
